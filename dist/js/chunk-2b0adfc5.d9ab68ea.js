(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b0adfc5"],{"330b":function(t,e,a){"use strict";a("ae9d")},"9aa7":function(t,e,a){"use strict";a("b03f")},ae9d:function(t,e,a){},b03f:function(t,e,a){},f6eb:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-gr"},[a("div",{staticClass:"add-gr1"},[a("h5",{staticClass:"mb-3 header-title"},[t._v("Cập nhật thông tin dự án")]),a("b-form",[a("div",{staticClass:"grid grid-cols-7 gap-4"},[a("b-form-group",{staticClass:"col-span-5",attrs:{id:"input-group-1",label:"Tên dự án","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Nhập dự án",required:""},model:{value:t.nameProject,callback:function(e){t.nameProject=e},expression:"nameProject"}})],1),a("b-form-group",{staticClass:"col-span-2",attrs:{id:"input-group-1",label:"Mẫ dự án","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Nhập mã dự án",required:""},model:{value:t.codeProject,callback:function(e){t.codeProject=e},expression:"codeProject"}})],1)],1),a("b-form-group",{staticClass:"col-span-5",attrs:{id:"input-group-1",label:"Tên chủ đầu tư","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Nhập tên chủ đầu tư",required:""},model:{value:t.nameInvestor,callback:function(e){t.nameInvestor=e},expression:"nameInvestor"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Mô tả, ghi chú về dự án","label-for":"input-2"}},[a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Mô tả, ghi chú về dự án",rows:"3","max-rows":"6"},model:{value:t.descriptionProject,callback:function(e){t.descriptionProject=e},expression:"descriptionProject"}})],1),a("div",{staticClass:"add-gr11"},[a("div",{staticClass:"add-gr111"},[a("b-form-group",{attrs:{id:"input-group-1",label:"Ngày bắt đầu tiếp nhận:","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",type:"date",required:""},model:{value:t.timeStart,callback:function(e){t.timeStart=e},expression:"timeStart"}})],1)],1),a("div",{staticClass:"add-gr111"},[a("b-form-group",{attrs:{id:"input-group-1",label:"Thời gian kết thúc dự kiến:","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",type:"date",required:""},model:{value:t.timeExpect,callback:function(e){t.timeExpect=e},expression:"timeExpect"}})],1)],1)]),a("div",{staticClass:"add-gr11"},[a("div",{staticClass:"add-gr111"},[a("b-form-group",{attrs:{id:"input-group-1",label:"Thời gian kết thúc thực tế:","label-for":"input-1"}},[a("b-form-input",{attrs:{id:"input-1",type:"date",required:""},model:{value:t.timeReal,callback:function(e){t.timeReal=e},expression:"timeReal"}})],1)],1),a("div",{staticClass:"add-gr111"},[a("b-form-group",{attrs:{id:"input-group-1",label:"Trạng thái dự án::","label-for":"input-1"}},[a("b-form-select",{attrs:{options:t.status_project},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Trạng thái dự án: --")])]},proxy:!0}]),model:{value:t.selectedStatusProject,callback:function(e){t.selectedStatusProject=e},expression:"selectedStatusProject"}})],1)],1)])],1)],1),a("div",{staticClass:"add-gr2"},[a("h5",{staticClass:"mb-3 header-title"},[t._v("Nhân viên tham gia dự án")]),a("b-form",[a("b-form-group",{attrs:{id:"input-group-1",label:"Nhân sự phụ trách chính:","label-for":"input-1"}},[a("multiselect",{attrs:{multiple:"","custom-label":t.custom_label,label:"name","track-by":"id",selectLabel:"Ấn enter để chọn",deselectLabel:"Ấn enter để bỏ chọn",options:t.persion_main},model:{value:t.selectedPersionMain,callback:function(e){t.selectedPersionMain=e},expression:"selectedPersionMain"}})],1)],1),a("b-form",[a("b-form-group",{attrs:{id:"input-group-1",label:"Nhân sự liên quan:","label-for":"input-1"}},[a("multiselect",{attrs:{multiple:"","custom-label":t.custom_label,label:"name","track-by":"id",selectLabel:"Ấn enter để chọn",deselectLabel:"Ấn enter để bỏ chọn",options:t.project_involve},model:{value:t.selectedInvolve,callback:function(e){t.selectedInvolve=e},expression:"selectedInvolve"}})],1)],1)],1),a("div",{staticClass:"add-gr3"},[a("h5",[t._v("File và tài liệu liên quan")]),a("div",{staticClass:"flex justify-between"},[a("input",{staticClass:"cursor-pointer",attrs:{multiple:"",type:"file",name:"",id:""},on:{change:function(e){return t.onFileChange(e)}}}),t._m(0)]),t.arrItem.length>0?a("div",t._l(t.arrItem,(function(e,i){return a("div",{key:i,staticClass:"nguon text-muted font-weight-bold flex justify-between pt-2"},[a("div",{staticClass:"flex"},[a("a",{staticStyle:{"line-height":"24px"},attrs:{href:t.addressServe+t.arrItem[i].path}},[t._v(" File "+t._s(i+1)+" : ")]),a("input",{staticClass:"rootNameFile ml-24",attrs:{type:"text"},domProps:{value:t.arrItem[i].rootName}})]),a("div",[a("i",{staticClass:"menu-icon cursor-pointer flaticon2-rubbish-bin text-white pl-2 pr-2 bg-red-600",on:{click:function(e){return t.handleDelete(i)}}})])])})),0):t._e()]),a("div",{staticClass:"add-gr4"},[a("div",{staticClass:"add-gr41"},[a("b-tabs",{attrs:{"content-class":"mt-3"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("b-tab",{attrs:{title:"Ghi Chú",active:""}},[a("p",[t._v(" Sau khi thêm bản ghi bạn có thể sử dụng chức năng ghi chú Giúp bạn ghi lại những gì liên quan đến bản ghi này theo từng giai đoạn, thời gian khác nhau Nội dung sẽ được hiển thị theo format mẫu bên dưới. ")])]),a("b-tab",{attrs:{title:"Lịch Sử"}},[a("p",[t._v(" Dưới đây là lịch sử các lần cập nhật dữ liệu Giúp bạn xem được ai đã cập nhật thông tin? cập nhật vào lúc nào? và cập nhật những gì? Nội dung sẽ được hiển thị theo format mẫu bên dưới. ")])])],1)],1),t._m(1)]),a("div",{staticClass:"add-gr5"},[a("div",{staticClass:"add-gr51"},[a("b-button",{staticClass:"mb-2 tao-cv",attrs:{size:"sm"}},[a("b-icon",{attrs:{icon:"x-octagon-fill","aria-hidden":"true"}}),t._v(" Bỏ qua ")],1)],1),t.idCurrentProj?a("div",{staticClass:"add-gr51 add-gr52"},[a("b-button",{ref:"kt_save_changes",staticClass:"mb-2 tao-cv",attrs:{size:"sm"},on:{click:t.handleUpdate}},[a("b-icon",{attrs:{icon:"check2","aria-hidden":"true"}}),t._v(" Cập nhật ")],1)],1):a("div",{staticClass:"add-gr51 add-gr52"},[a("b-button",{ref:"kt_save_changes",staticClass:"mb-2 tao-cv",attrs:{size:"sm"},on:{click:t.handleSave}},[a("b-icon",{attrs:{icon:"check2","aria-hidden":"true"}}),t._v(" Tạo dự án ")],1)],1)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex"},[a("input",{attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-gr41"},[a("p",[t._v(" Tên nhân viên ghi chú Thời điểm ghi chú Đây là mẫu format ghi chú. Nội dung ghi chú sẽ được hiển thị ở đây ")])])}],r=a("b85c"),s=a("5530"),o=(a("b0c0"),a("4de4"),a("8e5f")),c=a.n(o),l=a("2f62"),d=a("25a6"),u={name:"add_task",components:{Multiselect:c.a},data:function(){return{idCurrentProj:null,text:"",currentTab:0,nameProject:"",codeProject:"",nameInvestor:"",descriptionProject:"",timeStart:"",timeExpect:"",timeReal:"",selectedStatusProject:null,status_project:[{value:"Dự án mới",text:"Dự án mới"},{value:"Chưa hoàn thành",text:"Chưa hoàn thành"},{value:"Đã hoàn thành",text:"Đã hoàn thành"}],selectedPersionMain:null,persion_main:[],selectedInvolve:null,project_involve:[],fileData:[],arrItem:[]}},created:function(){var t=this;this.idCurrentProj=this.$route.params.id,void 0!==this.idCurrentProj&&this["storeqlda/getProjectWithId"](this.idCurrentProj).then((function(e){t.nameProject=e.data.pagi.tenDuAn,t.codeProject=e.data.pagi.maDuAn,t.nameInvestor=e.data.pagi.tenCdt,t.descriptionProject=e.data.pagi.moTaDuAn,t.timeStart=e.data.pagi.ngayBatDau,t.timeExpect=e.data.pagi.ngayKetThuc,t.timeReal=e.data.pagi.ngayKetThucThucTe,t.selectedStatusProject=e.data.pagi.trangThai,t.selectedPersionMain=JSON.parse(e.data.pagi.nhanSuChinh),t.selectedInvolve=JSON.parse(e.data.pagi.nhanSuLienQuan),t.arrItem=e.data.item})),this["storeqlda/getListDataUser"]().then((function(){var e=t["storeqlda/getListDataUserGTer"];for(var a in e){var i={id:e[a].id,text:e[a].name};t.persion_main.push(i),t.project_involve.push(i)}}))},computed:Object(s["a"])(Object(s["a"])({},Object(l["c"])(["storeqlda/getListDataUserGTer","currentUserPersonalInfo","storeqlda/currentUser"])),Object(l["d"])({addressServe:function(t){return t.storeqlda.addressServe}})),methods:Object(s["a"])(Object(s["a"])({},Object(l["b"])(["storeqlda/ActionCreateProject","storeqlda/getListDataUser","storeqlda/getProjectWithId","storeqlda/ActionUpdateProject","storeqlda/destroyFileAttachTask"])),{},{custom_label:function(t){var e=t.text;return"".concat(e)},handleDelete:function(t){var e=this;confirm("Bạn có chắc chắn muốn xóa dữ liệu này không?")&&this["storeqlda/destroyFileAttachTask"](this.arrItem[t].id).then((function(a){e.arrItem=e.arrItem.filter((function(a){return a.id!==e.arrItem[t].id})),alert(a.data.msg)}))},onFileChange:function(t){var e=this,a=t.target.files;if(this.fileData=[],"function"===typeof FileReader){var i,n=Object(r["a"])(a);try{var s=function(){var t=i.value,a=new FileReader;a.readAsDataURL(t),a.onload=function(){e.fileData.push(t)}};for(n.s();!(i=n.n()).done;)s()}catch(o){n.e(o)}finally{n.f()}}else alert("Sorry, FileReader API not supported")},handleUpdate:function(){for(var t=this,e=document.querySelectorAll(".rootNameFile"),a={},i=0;i<e.length;i++)a[this.arrItem[i].id]=e[i].value;var n={tenDuAn:this.nameProject,maDuAn:this.codeProject,tenCdt:this.nameInvestor,moTaDuAn:this.descriptionProject,ngayBatDau:this.timeStart,ngayKetThuc:this.timeExpect,ngayKetThucThucTe:this.timeReal,trangThai:this.selectedStatusProject,nhanSuChinh:JSON.stringify(this.selectedPersionMain),nhanSuLienQuan:JSON.stringify(this.selectedInvolve),idProj:this.idCurrentProj,objFile:this.fileData,arrNameFile:JSON.stringify(a)},r=this.$refs["kt_save_changes"];r.classList.add("spinner","spinner-light","spinner-right"),setTimeout((function(){t["storeqlda/ActionUpdateProject"](n).then((function(t){alert(t.data)})),r.classList.remove("spinner","spinner-light","spinner-right")}),2e3)},handleSave:function(){var t=this,e={tenDuAn:this.nameProject,maDuAn:this.codeProject,tenCdt:this.nameInvestor,moTaDuAn:this.descriptionProject,ngayBatDau:this.timeStart,ngayKetThuc:this.timeExpect,ngayKetThucThucTe:this.timeReal,trangThai:this.selectedStatusProject,nhanSuChinh:JSON.stringify(this.selectedPersionMain),nhanSuLienQuan:JSON.stringify(this.selectedInvolve),objFile:this.fileData},a=this.$refs["kt_save_changes"];a.classList.add("spinner","spinner-light","spinner-right"),setTimeout((function(){t["storeqlda/ActionCreateProject"](e).then((function(t){alert(t.data)})),a.classList.remove("spinner","spinner-light","spinner-right")}),2e3)}}),mounted:function(){this.$store.dispatch(d["a"],[{title:"Thêm dự án"}])},watch:{}},h=u,p=(a("330b"),a("9aa7"),a("2877")),m=Object(p["a"])(h,i,n,!1,null,"207fe2a6",null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2b0adfc5.d9ab68ea.js.map