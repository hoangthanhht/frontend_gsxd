(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4980a5a3"],{"26c7":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-gr"},[i("div",{staticClass:"add-gr1"},[i("h5",{staticClass:"mb-3 header-title"},[t._v("Cập nhật thông tin công việc")]),i("b-form",[i("b-form-group",{attrs:{id:"input-group-1",label:"Tên công việc (tiêu đề)","label-for":"input-1"}},[i("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Nhập tên công việc",required:""},model:{value:t.nameTask,callback:function(e){t.nameTask=e},expression:"nameTask"}})],1),i("b-form-group",{attrs:{description:"Việc mô tả chi tiết công việc sẽ giúp người thực hiện dễ dàng hơn",id:"input-group-2",label:"Nội dung công việc","label-for":"input-2"}},[i("b-form-textarea",{attrs:{id:"textarea",placeholder:"Nội dung chi tiết công việc",rows:"3","max-rows":"6"},model:{value:t.descriptionTask,callback:function(e){t.descriptionTask=e},expression:"descriptionTask"}})],1),i("b-form-group",{attrs:{id:"input-group-2",tooltip:"",label:"Lưu ý","label-for":"input-2"}},[i("b-form-textarea",{attrs:{id:"textarea",placeholder:"Lưu ý",rows:"3","max-rows":"6"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1),i("div",{staticClass:"add-gr11"},[i("div",{staticClass:"add-gr111"},[i("b-form-group",{attrs:{id:"input-group-1",label:"Thời gian bắt đầu:","label-for":"input-1"}},[i("b-form-input",{attrs:{id:"input-1",type:"date",required:""},model:{value:t.timeStart,callback:function(e){t.timeStart=e},expression:"timeStart"}})],1)],1),i("div",{staticClass:"add-gr111"},[i("b-form-group",{attrs:{id:"input-group-1",label:"Thời gian kết thúc dự kiến:","label-for":"input-1"}},[i("b-form-input",{attrs:{id:"input-1",type:"date",required:""},model:{value:t.timeExpect,callback:function(e){t.timeExpect=e},expression:"timeExpect"}})],1)],1)]),i("div",{staticClass:"add-gr11"},[i("div",{staticClass:"add-gr111"},[i("b-form-group",{attrs:{id:"input-group-1",label:"Mức độ ưu tiên:","label-for":"input-1"}},[i("b-form-select",{attrs:{options:t.priority_level},scopedSlots:t._u([{key:"first",fn:function(){return[i("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Mức độ ưu tiên --")])]},proxy:!0}]),model:{value:t.selectedPriorityLevel,callback:function(e){t.selectedPriorityLevel=e},expression:"selectedPriorityLevel"}})],1)],1),i("div",{staticClass:"add-gr111"},[i("b-form-group",{attrs:{id:"input-group-1",label:"Trạng thái công việc","label-for":"input-1"}},[i("b-form-input",{attrs:{id:"input-1",type:"text",required:""},model:{value:t.statusTask,callback:function(e){t.statusTask=e},expression:"statusTask"}})],1)],1)]),i("div",{staticClass:"add-gr11"},[i("div",{staticClass:"add-gr111"},[i("b-form-group",{attrs:{id:"input-group-1",label:"Thời gian bắt đầu thực tế:","label-for":"input-1"}},[i("b-form-input",{attrs:{id:"input-1",type:"date",required:""},model:{value:t.timeStartReal,callback:function(e){t.timeStartReal=e},expression:"timeStartReal"}})],1)],1),i("div",{staticClass:"add-gr111"},[i("b-form-group",{attrs:{id:"input-group-1",label:"Thời gian kết thúc thực tế:","label-for":"input-1"}},[i("b-form-input",{attrs:{id:"input-1",type:"date",required:""},model:{value:t.timeFinishReal,callback:function(e){t.timeFinishReal=e},expression:"timeFinishReal"}})],1)],1)]),i("b-form-group",{attrs:{id:"input-group-1",label:"Kết quả thực hiện:","label-for":"input-1"}},[i("b-form-select",{attrs:{options:t.result},model:{value:t.selectedResult,callback:function(e){t.selectedResult=e},expression:"selectedResult"}})],1)],1)],1),i("div",{staticClass:"add-gr2"},[i("h5",{staticClass:"mb-3 header-title"},[t._v("Thành phần liên quan")]),i("b-form",[i("b-form-group",{attrs:{id:"input-group-1",label:"Nhân sự liên quan:","label-for":"input-1"}},[i("multiselect",{attrs:{multiple:"","custom-label":t.custom_label,label:"name","track-by":"id",selectLabel:"Ấn enter để chọn",deselectLabel:"Ấn enter để bỏ chọn",options:t.persion_do},model:{value:t.selectedPersionDo,callback:function(e){t.selectedPersionDo=e},expression:"selectedPersionDo"}})],1)],1),i("b-form",[i("b-form-group",{attrs:{id:"input-group-1",label:"Người giao việc:","label-for":"input-1"}},[i("multiselect",{attrs:{multiple:"","custom-label":t.custom_label,label:"name","track-by":"id",selectLabel:"Ấn enter để chọn",deselectLabel:"Ấn enter để bỏ chọn",options:t.persion_assign},model:{value:t.selectedPersionAssign,callback:function(e){t.selectedPersionAssign=e},expression:"selectedPersionAssign"}})],1)],1),i("b-form",[i("b-form-group",{attrs:{id:"input-group-1",label:"Dự án liên quan:","label-for":"input-1"}},[i("multiselect",{attrs:{multiple:"","custom-label":t.custom_label,label:"name","track-by":"id",selectLabel:"Ấn enter để chọn",deselectLabel:"Ấn enter để bỏ chọn",options:t.project},model:{value:t.selectedProject,callback:function(e){t.selectedProject=e},expression:"selectedProject"}})],1)],1)],1),i("div",{staticClass:"add-gr3"},[i("h5",[t._v("File và tài liệu liên quan")]),i("div",{staticClass:"flex justify-between"},[i("input",{staticClass:"cursor-pointer",attrs:{multiple:"",type:"file",name:"",id:""},on:{change:function(e){return t.onFileChange(e)}}}),t._m(0)]),t.arrItem.length>0?i("div",t._l(t.arrItem,(function(e,a){return i("div",{key:a,staticClass:"nguon text-muted font-weight-bold flex justify-between pt-2"},[i("div",{staticClass:"flex"},[i("a",{staticStyle:{"line-height":"24px"},attrs:{href:t.addressServe+t.arrItem[a].path}},[t._v(" File "+t._s(a+1)+" : ")]),i("input",{staticClass:"rootNameFile ml-24",attrs:{type:"text"},domProps:{value:t.arrItem[a].rootName}})]),i("div",[i("i",{staticClass:"menu-icon cursor-pointer flaticon2-rubbish-bin text-white pl-2 pr-2 bg-red-600",on:{click:function(e){return t.handleDelete(a)}}})])])})),0):t._e()]),i("div",{staticClass:"add-gr4"},[i("div",{staticClass:"add-gr41"},[i("b-tabs",{attrs:{"content-class":"mt-3"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[i("b-tab",{attrs:{title:"Ghi Chú",active:""}},[i("p",[t._v(" Sau khi thêm bản ghi bạn có thể sử dụng chức năng ghi chú Giúp bạn ghi lại những gì liên quan đến bản ghi này theo từng giai đoạn, thời gian khác nhau Nội dung sẽ được hiển thị theo format mẫu bên dưới. ")])]),i("b-tab",{attrs:{title:"Lịch Sử"}},[i("p",[t._v(" Dưới đây là lịch sử các lần cập nhật dữ liệu Giúp bạn xem được ai đã cập nhật thông tin? cập nhật vào lúc nào? và cập nhật những gì? Nội dung sẽ được hiển thị theo format mẫu bên dưới. ")])])],1)],1),t._m(1)]),i("div",{staticClass:"add-gr5"},[i("div",{staticClass:"add-gr51"},[i("b-button",{staticClass:"mb-2 tao-cv",attrs:{size:"sm"}},[i("b-icon",{attrs:{icon:"x-octagon-fill","aria-hidden":"true"}}),t._v(" Bỏ qua ")],1)],1),t.idCurrentTask?i("div",{staticClass:"add-gr51 add-gr52"},[i("b-button",{ref:"kt_save_changes",staticClass:"mb-2 tao-cv",attrs:{size:"sm"},on:{click:t.handleUpdate}},[i("b-icon",{attrs:{icon:"check2","aria-hidden":"true"}}),t._v(" Cập nhật ")],1)],1):i("div",{staticClass:"add-gr51 add-gr52"},[i("b-button",{ref:"kt_save_changes",staticClass:"mb-2 tao-cv",attrs:{size:"sm"},on:{click:t.handleSave}},[i("b-icon",{attrs:{icon:"check2","aria-hidden":"true"}}),t._v(" Tạo công việc ")],1)],1)])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("input",{attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-gr41"},[i("p",[t._v(" Tên nhân viên ghi chú Thời điểm ghi chú Đây là mẫu format ghi chú. Nội dung ghi chú sẽ được hiển thị ở đây ")])])}],s=i("b85c"),r=i("5530"),l=(i("b0c0"),i("4de4"),i("8e5f")),o=i.n(l),c=i("2f62"),u=i("25a6"),d={name:"add_task",components:{Multiselect:o.a},data:function(){return{idCurrentTask:null,arrItem:[],text:"",currentTab:0,nameTask:"",descriptionTask:"",note:"",timeStart:"",timeExpect:"",statusTask:"",timeStartReal:"",timeFinishReal:"",selectedPersionDo:null,persion_do:[],selectedPersionAssign:null,persion_assign:[],selectedProject:null,project:[],selectedPriorityLevel:null,priority_level:[{value:"Quan trọng và khẩn cấp",text:"Quan trọng và khẩn cấp"},{value:"Quan trọng nhưng không khẩn cấp",text:"Quan trọng nhưng không khẩn cấp"},{value:"Khẩn cấp nhưng không quan trọng",text:"Khẩn cấp nhưng không quan trọng"},{value:"Không quan trọng và không khẩn cấp",text:"Không quan trọng và không khẩn cấp"}],selectedResult:null,result:[{value:"Chưa hoàn thành",text:"Chưa hoàn thành"},{value:"Đã hoàn thành",text:"Đã hoàn thành"}],fileData:[]}},created:function(){var t=this;this.idCurrentTask=this.$route.params.id,void 0!==this.idCurrentTask&&this["storeqlda/getTaskWithId"](this.idCurrentTask).then((function(e){t.nameTask=e.data.pagi.Ten,t.descriptionTask=e.data.pagi.moTaTask,t.note=e.data.pagi.luuY,t.timeStart=JSON.parse(e.data.pagi.keHoach)[0],t.timeExpect=JSON.parse(e.data.pagi.keHoach)[1],t.statusTask=e.data.pagi.tinhTrang,t.timeStartReal=JSON.parse(e.data.pagi.thucHien)[0],t.timeFinishReal=JSON.parse(e.data.pagi.thucHien)[1],t.selectedPersionDo=JSON.parse(e.data.pagi.nguoiPhoiHop),t.selectedPersionAssign=JSON.parse(e.data.pagi.nguoiDeXuat),t.selectedProject=JSON.parse(e.data.pagi.duanLienQuan),t.selectedPriorityLevel=e.data.pagi.mucDo,t.selectedResult=e.data.pagi.ketQua,t.arrItem=e.data.item})),this["storeqlda/getListDataUser"]().then((function(){var e=t["storeqlda/getListDataUserGTer"];for(var i in e){var a={id:e[i].id,text:e[i].name};t.persion_do.push(a),t.persion_assign.push(a)}})),this["storeqlda/getListProjectName"]().then((function(e){var i=e.data;for(var a in i){var n={id:i[a].id,text:i[a].tenDuAn};t.project.push(n)}}))},mounted:function(){this.$store.dispatch(u["a"],[{title:"Tạo công việc"}])},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])(["storeqlda/getListDataUserGTer","currentUserPersonalInfo","storeqlda/currentUser"])),Object(c["d"])({addressServe:function(t){return t.storeqlda.addressServe}})),methods:Object(r["a"])(Object(r["a"])({},Object(c["b"])(["storeqlda/ActionCreateTask","storeqlda/getListDataUser","storeqlda/getListProjectName","storeqlda/getTaskWithId","storeqlda/ActionUpdateTask","storeqlda/destroyFileAttachTask"])),{},{handleDelete:function(t){var e=this;confirm("Bạn có chắc chắn muốn xóa dữ liệu này không?")&&this["storeqlda/destroyFileAttachTask"](this.arrItem[t].id).then((function(i){e.arrItem=e.arrItem.filter((function(i){return i.id!==e.arrItem[t].id})),alert(i.data.msg)}))},onFileChange:function(t){var e=this,i=t.target.files;if(this.fileData=[],"function"===typeof FileReader){var a,n=Object(s["a"])(i);try{var r=function(){var t=a.value,i=new FileReader;i.readAsDataURL(t),i.onload=function(){e.fileData.push(t)}};for(n.s();!(a=n.n()).done;)r()}catch(l){n.e(l)}finally{n.f()}}else alert("Sorry, FileReader API not supported")},custom_label:function(t){var e=t.text;return"".concat(e)},handleUpdate:function(){for(var t=this,e=document.querySelectorAll(".rootNameFile"),i={},a=0;a<e.length;a++)i[this.arrItem[a].id]=e[a].value;var n=[],s=[];n.push(this.timeStart),n.push(this.timeExpect),s.push(this.timeStartReal),s.push(this.timeFinishReal);var r={Ten:this.nameTask,keHoach:JSON.stringify(n),thucHien:JSON.stringify(s),nguoiDeXuat:JSON.stringify(this.selectedPersionAssign),nguoiPhoiHop:JSON.stringify(this.selectedPersionDo),duanLienQuan:JSON.stringify(this.selectedProject),moTaTask:this.descriptionTask,mucDo:this.selectedPriorityLevel,ketQua:this.selectedResult,tinhTrang:this.statusTask,luuY:this.note,idTask:this.idCurrentTask,objFile:this.fileData,arrNameFile:JSON.stringify(i)},l=this.$refs["kt_save_changes"];l.classList.add("spinner","spinner-light","spinner-right"),setTimeout((function(){t["storeqlda/ActionUpdateTask"](r).then((function(t){alert(t.data)})),l.classList.remove("spinner","spinner-light","spinner-right")}),2e3)},handleSave:function(){var t=this,e=[],i=[];e.push(this.timeStart),e.push(this.timeExpect),i.push(this.timeStartReal),i.push(this.timeFinishReal);var a={Ten:this.nameTask,keHoach:JSON.stringify(e),thucHien:JSON.stringify(i),nguoiDeXuat:JSON.stringify(this.selectedPersionAssign),nguoiPhoiHop:JSON.stringify(this.selectedPersionDo),duanLienQuan:JSON.stringify(this.selectedProject),moTaTask:this.descriptionTask,mucDo:this.selectedPriorityLevel,ketQua:this.selectedResult,tinhTrang:this.statusTask,luuY:this.note,objFile:this.fileData},n=this.$refs["kt_save_changes"];n.classList.add("spinner","spinner-light","spinner-right"),setTimeout((function(){t["storeqlda/ActionCreateTask"](a).then((function(t){alert(t.data)})),n.classList.remove("spinner","spinner-light","spinner-right")}),2e3)}}),watch:{}},h=d,p=(i("ff87"),i("9aa7"),i("2877")),g=Object(p["a"])(h,a,n,!1,null,"d51e92e0",null);e["default"]=g.exports},"9aa7":function(t,e,i){"use strict";i("b03f")},b03f:function(t,e,i){},d9dd:function(t,e,i){},ff87:function(t,e,i){"use strict";i("d9dd")}}]);
//# sourceMappingURL=chunk-4980a5a3.bec17821.js.map