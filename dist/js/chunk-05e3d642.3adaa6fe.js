(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05e3d642"],{1322:function(t,e,a){"use strict";a("c623")},"1b3f":function(t,e,a){},"3a9a":function(t,e,a){"use strict";a("1b3f")},"3e50":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Approvematerialcost")],1)},n=[],s=a("5530"),l=a("2f62"),o=a("25a6"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card card-custom card-stretch gutter-b"},[a("div",{staticClass:"control_bao_gia"},[a("div",{staticClass:"select-cbb"},[a("div",[a("b-form-select",{attrs:{options:t.tinh},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Chọn tỉnh up báo giá --")])]},proxy:!0}]),model:{value:t.selectedTinh,callback:function(e){t.selectedTinh=e},expression:"selectedTinh"}})],1),a("div",[a("b-form-select",{attrs:{options:t.khuvuc},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("-- Chọn khu vực --")])]},proxy:!0}]),model:{value:t.selectedKhuVuc,callback:function(e){t.selectedKhuVuc=e},expression:"selectedKhuVuc"}})],1),a("div",[a("b-form-select",{attrs:{options:t.thang,disabled:t.isMonthDisabled},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("-- Báo giá theo tháng--")])]},proxy:!0}]),model:{value:t.selectedThang,callback:function(e){t.selectedThang=e},expression:"selectedThang"}})],1),a("div",[a("b-form-select",{attrs:{options:t.quy,disabled:t.isQuyDisabled},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("-- Báo giá theo quý--")])]},proxy:!0}]),model:{value:t.selectedQuy,callback:function(e){t.selectedQuy=e},expression:"selectedQuy"}})],1),a("div",[a("b-form-select",{attrs:{options:t.day,disabled:t.isDayDisabled},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("-- Báo giá theo ngày--")])]},proxy:!0}]),model:{value:t.selectedDay,callback:function(e){t.selectedDay=e},expression:"selectedDay"}})],1),a("div",[a("b-form-select",{attrs:{options:t.loaibg},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Chọn loại báo giá --")])]},proxy:!0}]),model:{value:t.selectedLoaiBg,callback:function(e){t.selectedLoaiBg=e},expression:"selectedLoaiBg"}})],1)]),a("div",{staticClass:"import_excel_bao_gia"},[a("div",[a("b-button",{staticClass:"mb-2 add-cv icon-tvgs",attrs:{size:"sm"},on:{click:t.handleApproveBaoGia}},[t._v(" Phê duyệt báo giá ")])],1),a("div",[a("b-form-select",{attrs:{options:t.persionupbg},scopedSlots:t._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null}},[t._v("-- Chọn người up giá --")])]},proxy:!0}]),model:{value:t.selectedPersionUpBg,callback:function(e){t.selectedPersionUpBg=e},expression:"selectedPersionUpBg"}})],1),a("div",[a("b-button",{staticClass:"mb-2 add-cv icon-tvgs",attrs:{size:"sm"},on:{click:t.handleXoaBG}},[t._v(" Xóa báo giá ")])],1),a("div",[a("b-button",{staticClass:"mb-2 add-cv icon-tvgs",attrs:{size:"sm"},on:{click:t.handleXemBG}},[t._v(" Xem báo giá ")])],1)])]),t.stringSearch?a("div",{staticClass:"card-body pt-0 pb-3"},[a("div",{staticClass:"tab-content"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"\n              table\n              table-head-custom\n              table-vertical-center\n              table-head-bg\n              table-borderless\n            "},[t._m(0),0!==t.dataArrBaoGiaSerch.length?a("tbody",[t._l(t.dataArrBaoGiaSerch,(function(e,i){return[a("tr",{key:i,staticClass:"row_table_note"},[a("td",{staticStyle:{display:"none"}},[a("span",{staticClass:"id_vat_tu text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickMaDM}},[t._v(t._s(null!==e.id?e.id:"null"))])]),a("td",[a("span",{staticClass:"ma_vat_tu text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickMaDM}},[t._v(t._s(null!==e.maVatTu?e.maVatTu:"null"))])]),a("td",[a("span",{staticClass:"ten_vat_tu text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickTenMaDM}},[t._v(t._s(null!==e.tenVatTu?e.tenVatTu:"null"))])]),a("td",[a("span",{staticClass:"don_vi text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickTenMaDM}},[t._v(t._s(null!==e.donVi?e.donVi:"null"))])]),a("td",[a("span",{staticClass:"gia_vat_tu text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickTenMaDM}},[t._v(t._s(null!==e.giaVatTu?e.giaVatTu:"null"))])]),a("td",[a("span",{staticClass:"khu_vuc text-muted font-weight-bold"},[t._v(t._s(null!==e.khuVuc?e.khuVuc:"null"))])]),a("td",[a("span",{staticClass:"thoi_diem text-muted font-weight-bold"},[t._v(t._s(null!==e.thoiDiem?e.thoiDiem:"null"))])]),a("td",[a("span",{staticClass:"nguon text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickTenMaDM}},[t._v(t._s(null!==e.nguon?e.nguon:"null"))])]),a("td",[a("span",{staticClass:"ghi_chu text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickTenMaDM}},[t._v(t._s(null!==e.ghiChu?e.ghiChu:"null"))])]),a("td",[a("span",{staticClass:"tinh text-muted font-weight-bold"},[t._v(t._s(null!==e.tinh?e.tinh:"null"))])]),a("td",[a("span",{staticClass:"tac_gia text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickTenMaDM}},[t._v(t._s(null!==e.tacGia?e.tacGia:"null"))])])])]}))],2):t._e()])])])]):a("div",{staticClass:"card-body pt-0 pb-3"},[a("div",{staticClass:"tab-content"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"\n              table\n              table-head-custom\n              table-vertical-center\n              table-head-bg\n              table-borderless\n            "},[t._m(1),0!==t.dataArr.length?a("tbody",[t._l(t.dataArrBaoGia,(function(e,i){return[a("tr",{key:i,staticClass:"row_table_note"},[a("td",{staticStyle:{display:"none"}},[a("span",{staticClass:"id_vat_tu text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickMaDM}},[t._v(t._s(null!==e.id?e.id:"null"))])]),a("td",[a("span",{staticClass:"ma_vat_tu text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickMaDM}},[t._v(t._s(null!==e.maVatTu?e.maVatTu:"null"))])]),a("td",[a("span",{staticClass:"ten_vat_tu text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickTenMaDM}},[t._v(t._s(null!==e.tenVatTu?e.tenVatTu:"null"))])]),a("td",[a("span",{staticClass:"don_vi text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickTenMaDM}},[t._v(t._s(null!==e.donVi?e.donVi:"null"))])]),a("td",[a("span",{staticClass:"gia_vat_tu text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickTenMaDM}},[t._v(t._s(null!==e.giaVatTu?e.giaVatTu:"null"))])]),a("td",[a("span",{staticClass:"khu_vuc text-muted font-weight-bold"},[t._v(t._s(null!==e.khuVuc?e.khuVuc:"null"))])]),a("td",[a("span",{staticClass:"thoi_diem text-muted font-weight-bold"},[t._v(t._s(null!==e.thoiDiem?e.thoiDiem:"null"))])]),a("td",[a("span",{staticClass:"nguon text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickTenMaDM}},[t._v(t._s(null!==e.nguon?e.nguon:"null"))])]),a("td",[a("span",{staticClass:"ghi_chu text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickTenMaDM}},[t._v(t._s(null!==e.ghiChu?e.ghiChu:"null"))])]),a("td",[a("span",{staticClass:"tinh text-muted font-weight-bold"},[t._v(t._s(null!==e.tinh?e.tinh:"null"))])]),a("td",[a("span",{staticClass:"tac_gia text-muted font-weight-bold",on:{blur:function(e){return t.handleSave(e)},click:t.hadleClickTenMaDM}},[t._v(t._s(null!==e.tacGia?e.tacGia:"null"))])])])]}))],2):t._e()])])])]),a("b-pagination",{attrs:{align:"right",pills:"",perPage:"20","total-rows":t.rows,size:"lg"},on:{"page-click":function(e){return t.dataArr(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"text-left"},[a("th",{staticStyle:{display:"none"}},[t._v("Id")]),a("th",[t._v("mã vật tư")]),a("th",[t._v("tên vật tư")]),a("th",[t._v("đơn vị")]),a("th",[t._v("giá")]),a("th",[t._v("khu vực")]),a("th",[t._v("thời điểm")]),a("th",[t._v("nguồn")]),a("th",[t._v("ghi chú")]),a("th",[t._v("tỉnh")]),a("th",[t._v("người đăng")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"text-left"},[a("th",{staticStyle:{display:"none"}},[t._v("Id")]),a("th",[t._v("mã vật tư")]),a("th",[t._v("tên vật tư")]),a("th",[t._v("đơn vị")]),a("th",[t._v("giá")]),a("th",[t._v("khu vực")]),a("th",[t._v("thời điểm")]),a("th",[t._v("nguồn")]),a("th",[t._v("ghi chú")]),a("th",[t._v("tỉnh")]),a("th",[t._v("người đăng")])])])}],r=(a("ac1f"),a("841c"),{name:"Approve_material_cost",components:{},data:function(){return{rows:100,currentPage:1,isMonthDisabled:!1,isQuyDisabled:!1,isDayDisabled:!1,selectedTinh:null,tinh:[],selectedKhuVuc:null,khuvuc:[{value:"",text:""}],markCost:null,selectedPersionUpBg:null,persionupbg:[{value:"",text:""}],selectedLoaiBg:null,loaibg:[{value:"Báo giá vật tư",text:"Báo giá vật tư"}],selectedDay:null,day:[],selectedThang:null,thang:[],selectedQuy:null,quy:[],dataArrBaoGia:[]}},created:function(){var t=this,e={check:0};this["storeqlda/getUserGuestUpBgia"](e).then((function(e){t.persionupbg=e.data}))},mounted:function(){},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(l["d"])({stringSearch:function(t){return t.storeqlda.stringSearch}})),Object(l["c"])(["storeqlda/getListDataBGia","storeqlda/arrBaoGiaSearchForApprove","currentUserPersonalInfo","storeqlda/currentUser"])),{},{dataArrBaoGiaSerch:function(){return this["storeqlda/arrBaoGiaSearchForApprove"]}}),watch:{selectedPersionUpBg:function(){var t=this,e={check:0,idUserImport:this.selectedPersionUpBg};this["storeqlda/getInfoTinhBaoGiaOfUserGuest"](e).then((function(e){t.tinh=e.data.tinh}))},selectedThang:function(){this.selectedThang?(this.isQuyDisabled=!0,this.isDayDisabled=!0):(this.isQuyDisabled=!1,this.isDayDisabled=!1)},selectedQuy:function(){this.selectedQuy?(this.isMonthDisabled=!0,this.isDayDisabled=!0):(this.isMonthDisabled=!1,this.isDayDisabled=!1)},selectedDay:function(){this.selectedDay?(this.isQuyDisabled=!0,this.isMonthDisabled=!0):(this.isQuyDisabled=!1,this.isMonthDisabled=!1)},selectedKhuVuc:function(){var t=this,e={check:0,idUserImport:this.selectedPersionUpBg,tinh:this.selectedTinh,khuvuc:this.selectedKhuVuc};this["storeqlda/getThoiDiemBaoGiaOfUserGuest"](e).then((function(e){for(var a in t.thang=[],t.quy=[],t.day=[],e.data.thoidiem)e.data.thoidiem[a].value.search("Thang")>=0?t.thang.push(e.data.thoidiem[a]):e.data.thoidiem[a].value.search("Quy")>=0?t.quy.push(e.data.thoidiem[a]):t.day.push(e.data.thoidiem[a])}))},selectedTinh:function(){var t=this,e={check:0,idUserImport:this.selectedPersionUpBg,tinh:this.selectedTinh};this["storeqlda/getInfoBaoGiaOfUserGuest"](e).then((function(e){t.khuvuc=e.data.khuvuc}))}},methods:Object(s["a"])(Object(s["a"])({},Object(l["b"])(["storeqlda/getAllListDataBaoGiaGuest","storeqlda/updateDataGiaVatTuGuestUp","storeqlda/approveGiaVtGuest","storeqlda/getUserGuestUpBgia","storeqlda/getInfoBaoGiaOfUserGuest","storeqlda/getInfoTinhBaoGiaOfUserGuest","storeqlda/viewBaoGiaWithSelecttionOfGuest","storeqlda/deleteGiaVtGuest","storeqlda/getThoiDiemBaoGiaOfUserGuest"])),{},{dataArr:function(t){var e=this,a="";this.isMonthDisabled||(a=this.selectedThang),this.isQuyDisabled||(a=this.selectedQuy),this.isDayDisabled||(a=this.selectedDay);var i={check:0,idUserView:this.currentUserPersonalInfo.user.id,user_id:this.selectedPersionUpBg,tinh:this.selectedTinh,khuvuc:this.selectedKhuVuc,thoidiem:a,page:t};this["storeqlda/viewBaoGiaWithSelecttionOfGuest"](i).then((function(t){e.dataArrBaoGia=t.data.pagi.data,e.pagination=t.data.pagi,e.rows=t.data.pagi.total}))},handleXoaBG:function(){var t=this;if(confirm("Bạn có chắc chắn muốn xóa dữ liệu này không?"))if(this.selectedTinh&&this.selectedKhuVuc&&(this.selectedDay||this.selectedThang||this.selectedQuy)){var e="";this.isMonthDisabled||(e=this.selectedThang),this.isQuyDisabled||(e=this.selectedQuy),this.isDayDisabled||(e=this.selectedDay);var a={giaVt:e+","+this.selectedKhuVuc,tinh:this.selectedTinh,user_id:this.selectedPersionUpBg};this["storeqlda/deleteGiaVtGuest"](a).then((function(e){alert(e.data.msg),t.handleXemBG()}))}else alert("Bạn chưa chọn người up báo giá hoặc chưa chọn tỉnh hoặc khu vực hoặc báo giá theo tháng quý hoặc ngày")},handleXemBG:function(){var t=this,e="";this.isMonthDisabled||(e=this.selectedThang),this.isQuyDisabled||(e=this.selectedQuy),this.isDayDisabled||(e=this.selectedDay);var a={check:0,idUserView:this.currentUserPersonalInfo.user.id,user_id:this.selectedPersionUpBg,tinh:this.selectedTinh,khuvuc:this.selectedKhuVuc,thoidiem:e};this.selectedTinh&&this.selectedKhuVuc&&this.selectedPersionUpBg&&(this.selectedDay||this.selectedThang||this.selectedQuy)?(this["storeqlda/viewBaoGiaWithSelecttionOfGuest"](a).then((function(e){t.dataArrBaoGia=e.data.pagi.data,t.pagination=e.data.pagi,t.rows=e.data.pagi.total})),this["storeqlda/getAllListDataBaoGiaGuest"](a)):alert("Bạn chưa chọn người up báo giá hoặc chưa chọn tỉnh hoặc khu vực hoặc báo giá theo tháng quý hoặc ngày")},handleApproveBaoGia:function(){var t=this;if(confirm("Bạn có chắc chắn muốn phê duyệt dữ liệu này không?"))if(this.selectedTinh&&this.selectedKhuVuc&&(this.selectedDay||this.selectedThang||this.selectedQuy)){var e="";this.isMonthDisabled||(e=this.selectedThang),this.isQuyDisabled||(e=this.selectedQuy),this.isDayDisabled||(e=this.selectedDay);var a={giaVt:e+","+this.selectedKhuVuc,tinh:this.selectedTinh,user_id:this.selectedPersionUpBg,idUserApprove:this.currentUserPersonalInfo.user.id};this["storeqlda/approveGiaVtGuest"](a).then((function(i){!1===i.ok?alert(i.error):!0===i.data.exist?confirm("Báo giá này đã có trong cơ sở dữ liêu. Bạn có muốn ghi đè các dữ liệu này không?")?(a={giaVt:e+","+t.selectedKhuVuc,tinh:t.selectedTinh,user_id:t.selectedPersionUpBg,idUserApprove:t.currentUserPersonalInfo.user.id,agreeOverride:1},t["storeqlda/approveGiaVtGuest"](a).then((function(t){return alert(t.data.message)}))):(a={giaVt:e+","+t.selectedKhuVuc,tinh:t.selectedTinh,user_id:t.selectedPersionUpBg,idUserApprove:t.currentUserPersonalInfo.user.id,agreeOverride:2},t["storeqlda/approveGiaVtGuest"](a)):alert(i.data.message)}))}else alert("Bạn chưa chọn file import dữ liệu, hoặc bạn chưa chọn tỉnh hoặc khu vực hoặc báo giá theo tháng quý hoặc ngày")},getParentSelect:function(t,e){while(t.parentElement){var a=t.parentElement;if(a.matches(e))return a;t=a}},hadleClickMaDM:function(t){t.target.setAttribute("contenteditable","true")},hadleClickTenMaDM:function(t){t.target.setAttribute("contenteditable","true")},handleSave:function(t){var e=this,a=this.getParentSelect(t.target,".row_table_note"),i=a.querySelector(".ma_vat_tu").innerText,n=a.querySelector(".ten_vat_tu").innerText,s=a.querySelector(".don_vi").innerText,l=a.querySelector(".gia_vat_tu").innerText,o=a.querySelector(".khu_vuc").innerText,c=a.querySelector(".thoi_diem").innerText,u=a.querySelector(".nguon").innerText,r=a.querySelector(".ghi_chu").innerText,d=a.querySelector(".tinh").innerText,h=a.querySelector(".tac_gia").innerText,v=a.querySelector(".id_vat_tu").innerText,g=this["storeqlda/currentUser"].id,b={maVatTu:i,tenVatTu:n,donVi:s,giaVatTu:l,khuvuc:o,thoidiem:c,ghiChu:r,nguon:u,tinh:d,tacGia:h,idVatTu:v,idUser:g};this["storeqlda/updateDataGiaVatTuGuestUp"](b).then((function(t){!1===t.ok?alert(t.error):e.handleXemBG()}))}})}),d=r,h=(a("1322"),a("2877")),v=Object(h["a"])(d,c,u,!1,null,"3f9f8a16",null),g=v.exports,b={name:"approvegiavattu",components:{Approvematerialcost:g},data:function(){return{tabIndex:0}},computed:Object(s["a"])(Object(s["a"])({},Object(l["c"])(["layoutConfig"])),{},{config:function(){return this.layoutConfig()}}),mounted:function(){this.$store.dispatch(o["a"],[{title:"Bảng giá vật tư"}])},destroyed:function(){localStorage.removeItem("builderTab")},methods:{reset:function(t){t.preventDefault(),localStorage.removeItem("config"),window.location.reload()},submit:function(t){t.preventDefault(),localStorage.setItem("config",JSON.stringify(this.config)),window.location.reload()}}},f=b,p=(a("3a9a"),Object(h["a"])(f,i,n,!1,null,"913903b8",null));e["default"]=p.exports},c623:function(t,e,a){}}]);
//# sourceMappingURL=chunk-05e3d642.3adaa6fe.js.map