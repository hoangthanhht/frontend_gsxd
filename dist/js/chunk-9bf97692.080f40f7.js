(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9bf97692"],{"07b8":function(t,e,i){},"0b4b":function(t,e,i){},"3aa5":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"them-hs-ngthu"},[i("div",[i("CompThemHs",{attrs:{isActive:t.isActive},on:{handleClick:t.handleClick}})],1),i("div",{staticClass:"body-hstk"},[i("div",{staticClass:"form-add-hs-nghthu"},[i("h4",[t._v("Cập nhật thông tin Hồ sơ nghiệm thu")]),i("div",{staticClass:"select-for-hs"},[i("p",[t._v("Loại Hồ sơ:")]),i("div",{staticClass:"theodoi-thicong"},[i("multiselect",{attrs:{"custom-label":t.custom_label,label:"name","track-by":"id",selectLabel:"Ấn enter để chọn",deselectLabel:"Ấn enter để bỏ chọn",options:t.kindfile},model:{value:t.selectedKindFile,callback:function(e){t.selectedKindFile=e},expression:"selectedKindFile"}})],1),i("p",{staticClass:"pt-2"},[t._v("Chọn dự án:")]),i("div",{staticClass:"theodoi-thicong"},[i("multiselect",{attrs:{"custom-label":t.custom_label,label:"name","track-by":"id",selectLabel:"Ấn enter để chọn",deselectLabel:"Ấn enter để bỏ chọn",options:t.project},model:{value:t.selectedProject,callback:function(e){t.selectedProject=e},expression:"selectedProject"}})],1)]),i("div",{staticClass:"hs-gr1"},[i("div",{staticClass:"gr-ten-hs"},[i("p",{staticClass:"pt-2"},[t._v("Tên Hồ sơ")]),i("b-form-input",{attrs:{id:"input-1",type:"email",placeholder:"Nhập tên công việc",required:""},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}})],1),i("div",{staticClass:"gr-sl"},[i("p",{staticClass:"pt-2"},[t._v("Số lượng:")]),i("b-form-input",{staticStyle:{width:"100%",height:"34px"},attrs:{type:"number",id:"quantity",name:"quantity",min:"-9999",max:"9999"},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}})],1)]),i("div",{staticClass:"hs-gr2"},[i("div",{staticClass:"gr-nhan"},[i("p",{staticClass:"pt-2"},[t._v("Ngày nhận:")]),i("b-form-input",{attrs:{id:"input-1",type:"date",required:""},model:{value:t.timeReceive,callback:function(e){t.timeReceive=e},expression:"timeReceive"}})],1),i("div",{staticClass:"gr-tra"},[i("p",{staticClass:"pt-2"},[t._v("Ngày trả:")]),i("b-form-input",{attrs:{id:"input-1",type:"date",required:""},model:{value:t.timeReturn,callback:function(e){t.timeReturn=e},expression:"timeReturn"}})],1)]),i("div",{staticClass:"hs-gr3"},[i("div",{staticClass:"gr-ktra"},[i("p",{staticClass:"pt-2"},[t._v("Lần kiểm tra:")]),i("b-form-input",{staticStyle:{width:"100%",height:"38px"},attrs:{type:"number",id:"quantity",name:"quantity",min:"-9999",max:"9999"},model:{value:t.timeTest,callback:function(e){t.timeTest=e},expression:"timeTest"}})],1),i("div",{staticClass:"gr-kqua"},[i("p",{staticClass:"pt-2"},[t._v("Kết quả kiểm tra:")]),i("b-form-select",{attrs:{options:t.result},scopedSlots:t._u([{key:"first",fn:function(){return[i("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Kết quả --")])]},proxy:!0}]),model:{value:t.selectedResult,callback:function(e){t.selectedResult=e},expression:"selectedResult"}})],1)]),i("div",{staticClass:"hs-gr4"},[i("p",{staticClass:"pt-2"},[t._v("Lý do không đạt:")]),i("b-form-textarea",{attrs:{id:"textarea",placeholder:"Lưu ý",rows:"3","max-rows":"6"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1),i("div",{staticClass:"hs-gr5"},[i("p",{staticClass:"pt-2"},[t._v("File và tài liệu liên quan")]),i("div",{staticClass:"flex justify-between"},[i("input",{staticClass:"cursor-pointer",attrs:{multiple:"",type:"file",name:"",id:""},on:{change:function(e){return t.onFileChange(e)}}}),t._m(0)]),t.arrItem.length>0?i("div",t._l(t.arrItem,(function(e,a){return i("div",{key:a,staticClass:"nguon text-muted font-weight-bold flex justify-between pt-2"},[i("div",{staticClass:"flex"},[i("a",{staticStyle:{"line-height":"24px"},attrs:{href:t.addressServe+t.arrItem[a].path}},[t._v(" File "+t._s(a+1)+" : ")]),i("input",{staticClass:"rootNameFile ml-24",attrs:{type:"text"},domProps:{value:t.arrItem[a].rootName}})]),i("div",[i("i",{staticClass:"menu-icon cursor-pointer flaticon2-rubbish-bin text-white pl-2 pr-2 bg-red-600",on:{click:function(e){return t.handleDelete(a)}}})])])})),0):t._e()])]),i("div",{staticClass:"hstk_note"},[i("div",{staticClass:"add-gr41"},[i("b-tabs",{attrs:{"content-class":"mt-3"}},[i("b-tab",{attrs:{title:"First",active:""}},[i("p",[t._v("I'm the first tab")])]),i("b-tab",{attrs:{title:"Second"}},[i("p",[t._v("I'm the second tab")])])],1)],1),t._m(1)])]),i("div",{staticClass:"hs-gr6"},[i("div",{staticClass:"add-gr51"},[i("b-button",{staticClass:"mb-2 tao-cv",attrs:{size:"sm"}},[i("b-icon",{attrs:{icon:"x-octagon-fill","aria-hidden":"true"}}),t._v(" Bỏ qua ")],1)],1),t.idCurrentFile?i("div",{staticClass:"add-gr51 add-gr52"},[i("b-button",{ref:"kt_save_changes",staticClass:"mb-2 tao-cv",attrs:{size:"sm"},on:{click:t.handleUpdate}},[i("b-icon",{attrs:{icon:"check2","aria-hidden":"true"}}),t._v(" Cập nhật ")],1)],1):i("div",{staticClass:"add-gr51 add-gr52"},[i("b-button",{ref:"kt_save_changes",staticClass:"mb-2 tao-cv",attrs:{size:"sm"},on:{click:t.handleSave}},[i("b-icon",{attrs:{icon:"check2","aria-hidden":"true"}}),t._v(" Tạo hồ sơ ")],1)],1)])])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("input",{attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-gr41"},[i("p",[t._v(" Tên nhân viên ghi chú Thời điểm ghi chú Đây là mẫu format ghi chú. Nội dung ghi chú sẽ được hiển thị ở đây ")])])}],n=i("b85c"),l=i("5530"),r=(i("4de4"),i("8e5f")),c=i.n(r),o=i("2f62"),d=i("7683"),u=i("25a6"),h={data:function(){return{idCurrentFile:null,fileName:"",quantity:0,timeReceive:"",timeReturn:"",timeTest:"",reason:"",selectedResult:null,result:[{value:"Đạt",text:"Đạt"},{value:"Không đạt",text:"Không đạt"}],selectedKindFile:null,kindfile:[{id:"1",text:"Hồ sơ nghiệm thu công việc"},{id:"2",text:"Hồ sơ nghiệm thu vật liệu"},{id:"2",text:"Hồ sơ nghiệm thu thiết bị"}],selectedProject:null,project:[],isActive:!1,fileData:[],arrItem:[]}},components:{CompThemHs:d["a"],Multiselect:c.a},computed:Object(l["a"])(Object(l["a"])({},Object(o["c"])(["storeqlda/getListDataUserGTer","currentUserPersonalInfo","storeqlda/currentUser"])),Object(o["d"])({addressServe:function(t){return t.storeqlda.addressServe}})),mounted:function(){this.$store.dispatch(u["a"],[{title:"Hồ sơ khác"}])},created:function(){var t=this;this.idCurrentFile=this.$route.params.id,void 0!==this.idCurrentFile&&(this["storeqlda/getFileWithId"](this.idCurrentFile).then((function(e){t.fileName=e.data.pagi.tenHoSo,t.quantity=e.data.pagi.soLuong,t.timeReceive=e.data.pagi.ngayNhan,t.timeReturn=e.data.pagi.ngayTra,t.timeTest=e.data.pagi.lanKiemTra,t.reason=e.data.pagi.lyDoKhongDat,t.selectedResult=e.data.pagi.ketQua,t.selectedKindFile=JSON.parse(e.data.pagi.loaiHoSo),t.selectedProject=JSON.parse(e.data.pagi.duAn),t.arrItem=e.data.item})),this.isActive=!0),this["storeqlda/getListProjectName"]().then((function(e){var i=e.data;for(var a in i){var s={id:i[a].id,text:i[a].tenDuAn};t.project.push(s)}}))},methods:Object(l["a"])(Object(l["a"])({},Object(o["b"])(["storeqlda/ActionCreateFile","storeqlda/getListDataUser","storeqlda/getListProjectName","storeqlda/getFileWithId","storeqlda/ActionUpdateFile","storeqlda/destroyFileAttachTask"])),{},{custom_label:function(t){var e=t.text;return"".concat(e)},handleDelete:function(t){var e=this;confirm("Bạn có chắc chắn muốn xóa dữ liệu này không?")&&this["storeqlda/destroyFileAttachTask"](this.arrItem[t].id).then((function(i){e.arrItem=e.arrItem.filter((function(i){return i.id!==e.arrItem[t].id})),alert(i.data.msg)}))},onFileChange:function(t){var e=this,i=t.target.files;if(this.fileData=[],"function"===typeof FileReader){var a,s=Object(n["a"])(i);try{var l=function(){var t=a.value,i=new FileReader;i.readAsDataURL(t),i.onload=function(){e.fileData.push(t)}};for(s.s();!(a=s.n()).done;)l()}catch(r){s.e(r)}finally{s.f()}}else alert("Sorry, FileReader API not supported")},handleUpdate:function(){for(var t=this,e=document.querySelectorAll(".rootNameFile"),i={},a=0;a<e.length;a++)i[this.arrItem[a].id]=e[a].value;var s={duAn:JSON.stringify(this.selectedProject),loaiHoSo:JSON.stringify(this.selectedKindFile),kyHieuHoS:"hsk",tenHoSo:this.fileName,soLuong:this.quantity,ngayNhan:this.timeReceive,ngayTra:this.timeReturn,lanKiemTra:this.timeTest,ketQua:this.result,lyDoKhongDat:this.reason,noiDungThayDoiTk:null,nguyenNhanThayDoiTk:null,nguoiPheDuyet:null,yKienTVGS:null,idFile:this.idCurrentFile,objFile:this.fileData,arrNameFile:JSON.stringify(i)},n=this.$refs["kt_save_changes"];n.classList.add("spinner","spinner-light","spinner-right"),setTimeout((function(){t["storeqlda/ActionUpdateFile"](s).then((function(t){alert(t.data)})),n.classList.remove("spinner","spinner-light","spinner-right")}),2e3)},handleSave:function(){var t=this,e={duAn:JSON.stringify(this.selectedProject),loaiHoSo:JSON.stringify(this.selectedKindFile),kyHieuHoSo:"hsk",tenHoSo:this.fileName,soLuong:this.quantity,ngayNhan:this.timeReceive,ngayTra:this.timeReturn,lanKiemTra:this.timeTest,ketQua:this.selectedResult,lyDoKhongDat:this.reason,noiDungThayDoiTk:null,nguyenNhanThayDoiTk:null,nguoiPheDuyet:null,yKienTVGS:null,objFile:this.fileData},i=this.$refs["kt_save_changes"];i.classList.add("spinner","spinner-light","spinner-right"),setTimeout((function(){t["storeqlda/ActionCreateFile"](e).then((function(t){alert(t.data)})),i.classList.remove("spinner","spinner-light","spinner-right")}),2e3)},handleClick:function(){this.isActive=!this.isActive}})},m=h,v=(i("60bc"),i("530a"),i("2877")),p=Object(v["a"])(m,a,s,!1,null,"1e57794d",null);e["default"]=p.exports},"3ca7":function(t,e,i){},"530a":function(t,e,i){"use strict";i("07b8")},"60bc":function(t,e,i){"use strict";i("0b4b")},7683:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"muchoso"},[i("div",{staticClass:"btn-muchs"},[i("router-link",{staticClass:"add-cv",attrs:{to:"/themhoso",tag:"b-button"}},[t._v("Hồ Sơ Nghiệm Thu")])],1),i("div",{staticClass:"btn-muchs"},[i("router-link",{staticClass:"add-cv",attrs:{to:"/hosotke",tag:"b-button"}},[t._v("Hồ Sơ Thiết Kế")])],1),i("div",{staticClass:"btn-muchs"},[i("router-link",{staticClass:"add-cv",attrs:{to:"/hosokhac",tag:"b-button"}},[t._v("Loại Hồ Sơ Khác")])],1)])},s=[],n={data:function(){return{isActive:!1}},methods:{handleClick:function(){this.$emit("handleClick")}}},l=n,r=(i("b721"),i("2877")),c=Object(r["a"])(l,a,s,!1,null,"f1fbb12c",null);e["a"]=c.exports},b721:function(t,e,i){"use strict";i("3ca7")}}]);
//# sourceMappingURL=chunk-9bf97692.080f40f7.js.map