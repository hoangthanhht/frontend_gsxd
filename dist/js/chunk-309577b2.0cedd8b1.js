(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-309577b2"],{"0113":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Approvematerialcost")],1)},i=[],n=s("5530"),l=s("2f62"),o=s("25a6"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-custom card-stretch gutter-b"},[s("div",{staticClass:"control_bao_gia"},[s("div",{staticClass:"select-cbb"},[s("div",[s("b-form-select",{attrs:{options:t.tinh},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Chọn tỉnh thành --")])]},proxy:!0}]),model:{value:t.selectedTinh,callback:function(e){t.selectedTinh=e},expression:"selectedTinh"}})],1),s("div",[s("b-form-select",{attrs:{options:t.khuvuc},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:null}},[t._v("-- Chọn khu vực --")])]},proxy:!0}]),model:{value:t.selectedKhuVuc,callback:function(e){t.selectedKhuVuc=e},expression:"selectedKhuVuc"}})],1),s("div",[s("b-form-select",{attrs:{options:t.thang,disabled:t.isMonthDisabled},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:null}},[t._v("-- Báo giá theo tháng--")])]},proxy:!0}]),model:{value:t.selectedThang,callback:function(e){t.selectedThang=e},expression:"selectedThang"}})],1),s("div",[s("b-form-select",{attrs:{options:t.quy,disabled:t.isQuyDisabled},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:null}},[t._v("-- Báo giá theo quý--")])]},proxy:!0}]),model:{value:t.selectedQuy,callback:function(e){t.selectedQuy=e},expression:"selectedQuy"}})],1),s("div",[s("b-form-select",{attrs:{options:t.day,disabled:t.isDayDisabled},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:null}},[t._v("-- Báo giá theo ngày--")])]},proxy:!0}]),model:{value:t.selectedDay,callback:function(e){t.selectedDay=e},expression:"selectedDay"}})],1),s("div",[s("b-form-select",{attrs:{options:t.loaibg},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Chọn loại báo giá --")])]},proxy:!0}]),model:{value:t.selectedLoaiBg,callback:function(e){t.selectedLoaiBg=e},expression:"selectedLoaiBg"}})],1)]),s("div",{staticClass:"import_excel_bao_gia"},[s("div",[s("b-form-select",{attrs:{options:t.persionupbg},scopedSlots:t._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:null}},[t._v("-- Chọn người up giá --")])]},proxy:!0}]),model:{value:t.selectedPersionUpBg,callback:function(e){t.selectedPersionUpBg=e},expression:"selectedPersionUpBg"}})],1),s("div",[s("label",{staticClass:"pr-3",attrs:{for:"fname"}},[t._v("Số điểm cần để xem báo giá:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.markCost,expression:"markCost"}],staticStyle:{height:"34px",border:"0.3px solid"},attrs:{type:"text",name:"birthday"},domProps:{value:t.markCost},on:{input:function(e){e.target.composing||(t.markCost=e.target.value)}}})]),s("div",[s("label",{staticClass:"pr-3",attrs:{for:"fname"}},[t._v("Số điểm hiện có của bạn:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.markUserView,expression:"markUserView"}],staticStyle:{height:"34px",border:"0.3px solid"},attrs:{type:"text",name:"birthday"},domProps:{value:t.markUserView},on:{input:function(e){e.target.composing||(t.markUserView=e.target.value)}}})]),s("div",[s("b-button",{staticClass:"mb-2 add-cv icon-tvgs",attrs:{size:"sm"},on:{click:t.handleXemBG}},[t._v(" Xem báo giá ")])],1)]),s("div",{staticClass:"import_excel_bao_gia"},[s("div",{ref:"element_vote"},[s("label",{staticClass:"pl-3"},[t._v(" Lượt vote của báo giá : ")]),s("span",[t._v(" "+t._s(t.currentVote)+" ")]),s("i",{ref:"icon-element_vote",staticClass:"flaticon-like icon-2x pl-4",staticStyle:{cursor:"pointer",disabled:"true"},on:{click:t.handleLike}})]),s("div",[s("b-button",{staticClass:"mb-2 add-cv icon-tvgs",attrs:{size:"sm"},on:{click:t.handleXemBG}},[t._v(" Chuyển đến trang đổi điểm ")])],1)])]),t.stringSearch?s("div",{staticClass:"card-body pt-0 pb-3"},[s("div",{staticClass:"tab-content"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"\n              table\n              table-head-custom\n              table-vertical-center\n              table-head-bg\n              table-borderless\n            "},[t._m(0),0!==t.dataArrBaoGiaSerch.length?s("tbody",[t._l(t.dataArrBaoGiaSerch,(function(e,a){return[s("tr",{key:a,staticClass:"row_table_note"},[s("td",[s("span",{staticClass:"ma_vat_tu text-muted font-weight-bold"},[t._v(t._s(null!==e.maVatTu?e.maVatTu:"null"))])]),s("td",[s("span",{staticClass:"ten_vat_tu text-muted font-weight-bold"},[t._v(t._s(null!==e.tenVatTu?e.tenVatTu:"null"))])]),s("td",[s("span",{staticClass:"don_vi text-muted font-weight-bold"},[t._v(t._s(null!==e.donVi?e.donVi:"null"))])]),s("td",[s("span",{staticClass:"gia_vat_tu text-muted font-weight-bold"},[t._v(t._s(null!==e.giaVatTu?e.giaVatTu:"null"))])]),s("td",[s("span",{staticClass:"khu_vuc text-muted font-weight-bold"},[t._v(t._s(null!==e.khuVuc?e.khuVuc:"null"))])]),s("td",[s("span",{staticClass:"thoi_diem text-muted font-weight-bold"},[t._v(t._s(null!==e.thoiDiem?e.thoiDiem:"null"))])]),s("td",[s("span",{staticClass:"nguon text-muted font-weight-bold"},[t._v(t._s(null!==e.nguon?e.nguon:"null"))])]),s("td",[s("span",{staticClass:"ghi_chu text-muted font-weight-bold"},[t._v(t._s(null!==e.ghiChu?e.ghiChu:"null"))])]),s("td",[s("span",{staticClass:"tinh text-muted font-weight-bold"},[t._v(t._s(null!==e.tinh?e.tinh:"null"))])]),s("td",[s("span",{staticClass:"tac_gia text-muted font-weight-bold"},[t._v(t._s(null!==e.tacGia?e.tacGia:"null"))])])])]}))],2):t._e()])])])]):s("div",{staticClass:"card-body pt-0 pb-3"},[s("div",{staticClass:"tab-content"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"\n              table\n              table-head-custom\n              table-vertical-center\n              table-head-bg\n              table-borderless\n            "},[t._m(1),0!==t.dataArr.length?s("tbody",[t._l(t.dataArrBaoGia,(function(e,a){return[s("tr",{key:a,staticClass:"row_table_note"},[s("td",[s("span",{staticClass:"ma_vat_tu text-muted font-weight-bold"},[t._v(t._s(null!==e.maVatTu?e.maVatTu:"null"))])]),s("td",[s("span",{staticClass:"ten_vat_tu text-muted font-weight-bold"},[t._v(t._s(null!==e.tenVatTu?e.tenVatTu:"null"))])]),s("td",[s("span",{staticClass:"don_vi text-muted font-weight-bold"},[t._v(t._s(null!==e.donVi?e.donVi:"null"))])]),s("td",[s("span",{staticClass:"gia_vat_tu text-muted font-weight-bold"},[t._v(t._s(null!==e.giaVatTu?e.giaVatTu:"null"))])]),s("td",[s("span",{staticClass:"khu_vuc text-muted font-weight-bold"},[t._v(t._s(null!==e.khuVuc?e.khuVuc:"null"))])]),s("td",[s("span",{staticClass:"thoi_diem text-muted font-weight-bold"},[t._v(t._s(null!==e.thoiDiem?e.thoiDiem:"null"))])]),s("td",[s("span",{staticClass:"nguon text-muted font-weight-bold"},[t._v(t._s(null!==e.nguon?e.nguon:"null"))])]),s("td",[s("span",{staticClass:"ghi_chu text-muted font-weight-bold"},[t._v(t._s(null!==e.ghiChu?e.ghiChu:"null"))])]),s("td",[s("span",{staticClass:"tinh text-muted font-weight-bold"},[t._v(t._s(null!==e.tinh?e.tinh:"null"))])]),s("td",[s("span",{staticClass:"tac_gia text-muted font-weight-bold"},[t._v(t._s(null!==e.tacGia?e.tacGia:"null"))])])])]}))],2):t._e()])])])]),s("b-pagination",{attrs:{align:"right",pills:"",perPage:"20","total-rows":t.rows,size:"lg"},on:{"page-click":function(e){return t.dataArr(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",{staticClass:"text-left"},[s("th",[t._v("mã vật tư")]),s("th",[t._v("tên vật tư")]),s("th",[t._v("đơn vị")]),s("th",[t._v("giá")]),s("th",[t._v("khu vực")]),s("th",[t._v("thời điểm")]),s("th",[t._v("nguồn")]),s("th",[t._v("ghi chú")]),s("th",[t._v("tỉnh")]),s("th",[t._v("người đăng")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",{staticClass:"text-left"},[s("th",[t._v("mã vật tư")]),s("th",[t._v("tên vật tư")]),s("th",[t._v("đơn vị")]),s("th",[t._v("giá")]),s("th",[t._v("khu vực")]),s("th",[t._v("thời điểm")]),s("th",[t._v("nguồn")]),s("th",[t._v("ghi chú")]),s("th",[t._v("tỉnh")]),s("th",[t._v("người đăng")])])])}],u=(s("ac1f"),s("841c"),{name:"Approve_material_cost",components:{},data:function(){return{currentVote:0,rows:100,currentPage:1,isMonthDisabled:!1,isQuyDisabled:!1,isDayDisabled:!1,selectedTinh:null,tinh:[],selectedKhuVuc:null,khuvuc:[{value:"",text:""}],markCost:null,markUserView:null,selectedPersionUpBg:null,persionupbg:[{value:"",text:""}],selectedLoaiBg:null,loaibg:[{value:"Báo giá vật tư",text:"Báo giá vật tư"}],selectedDay:null,day:[],selectedThang:null,thang:[],selectedQuy:null,quy:[],dataArrBaoGia:[]}},created:function(){var t=this,e={check:1};this["storeqlda/getUserGuestUpBgia"](e).then((function(e){t.persionupbg=e.data}))},mounted:function(){var t=this.$refs["element_vote"];t.style.display="none"},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(l["d"])({stringSearch:function(t){return t.storeqlda.stringSearch}})),Object(l["c"])(["storeqlda/getListDataBGia","storeqlda/arrBaoGiaSearchGuestViewOtherPs","currentUserPersonalInfo","storeqlda/currentUser"])),{},{dataArrBaoGiaSerch:function(){return this["storeqlda/arrBaoGiaSearchGuestViewOtherPs"]}}),watch:{selectedPersionUpBg:function(){var t=this,e={check:1,idUserImport:this.selectedPersionUpBg};this["storeqlda/getInfoTinhBaoGiaOfUserGuest"](e).then((function(e){t.tinh=e.data.tinh}))},selectedThang:function(){this.selectedThang?(this.isQuyDisabled=!0,this.isDayDisabled=!0):(this.isQuyDisabled=!1,this.isDayDisabled=!1)},selectedQuy:function(){this.selectedQuy?(this.isMonthDisabled=!0,this.isDayDisabled=!0):(this.isMonthDisabled=!1,this.isDayDisabled=!1)},selectedDay:function(){this.selectedDay?(this.isQuyDisabled=!0,this.isMonthDisabled=!0):(this.isQuyDisabled=!1,this.isMonthDisabled=!1)},selectedTinh:function(){var t=this,e={check:1,idUserImport:this.selectedPersionUpBg,tinh:this.selectedTinh};this["storeqlda/getInfoBaoGiaOfUserGuest"](e).then((function(e){t.khuvuc=e.data.khuvuc}))},selectedKhuVuc:function(){var t=this,e={check:1,idUserImport:this.selectedPersionUpBg,tinh:this.selectedTinh,khuvuc:this.selectedKhuVuc};this["storeqlda/getThoiDiemBaoGiaOfUserGuest"](e).then((function(e){for(var s in t.thang=[],t.quy=[],t.day=[],e.data.thoidiem)e.data.thoidiem[s].value.search("Thang")>=0?t.thang.push(e.data.thoidiem[s]):e.data.thoidiem[s].value.search("Quy")>=0?t.quy.push(e.data.thoidiem[s]):t.day.push(e.data.thoidiem[s])}))}},methods:Object(n["a"])(Object(n["a"])({},Object(l["b"])(["storeqlda/getAllListDataBaoGiaGuest","storeqlda/updateDataGiaVatTuGuestUp","storeqlda/approveGiaVtGuest","storeqlda/getUserGuestUpBgia","storeqlda/getInfoBaoGiaOfUserGuest","storeqlda/getInfoTinhBaoGiaOfUserGuest","storeqlda/viewBaoGiaWithSelecttionOfGuest","storeqlda/getThoiDiemBaoGiaOfUserGuest","storeqlda/apiHandleLike"])),{},{handleLike:function(){var t=this,e="";this.isMonthDisabled||(e=this.selectedThang),this.isQuyDisabled||(e=this.selectedQuy),this.isDayDisabled||(e=this.selectedDay);var s={idUserView:this.currentUserPersonalInfo.user.id,user_id:this.selectedPersionUpBg,tinh:this.selectedTinh,khuvuc:this.selectedKhuVuc,thoidiem:e};if(this.selectedTinh&&this.selectedKhuVuc&&this.selectedPersionUpBg&&(this.selectedDay||this.selectedThang||this.selectedQuy)){this["storeqlda/apiHandleLike"](s).then((function(e){t.currentVote=e.data}));var a=this.$refs["icon-element_vote"],i=a.className;-1!==i.indexOf("text-success")?(a.classList.remove("text-success"),a.classList.add("text-dark")):(a.classList.remove("text-dark"),a.classList.add("text-success"))}else{var n=this.$refs["element_vote"];n.style.display="none"}},dataArr:function(t){var e=this,s="";this.isMonthDisabled||(s=this.selectedThang),this.isQuyDisabled||(s=this.selectedQuy),this.isDayDisabled||(s=this.selectedDay);var a={check:3,idUserView:this.currentUserPersonalInfo.user.id,user_id:this.selectedPersionUpBg,tinh:this.selectedTinh,khuvuc:this.selectedKhuVuc,thoidiem:s,page:t};this["storeqlda/viewBaoGiaWithSelecttionOfGuest"](a).then((function(t){t&&(e.dataArrBaoGia=t.data.pagi.data,e.pagination=t.data.pagi,e.rows=t.data.pagi.total)}))},handleXemBG:function(){var t=this,e="";this.isMonthDisabled||(e=this.selectedThang),this.isQuyDisabled||(e=this.selectedQuy),this.isDayDisabled||(e=this.selectedDay);var s={check:1,idUserView:this.currentUserPersonalInfo.user.id,user_id:this.selectedPersionUpBg,tinh:this.selectedTinh,khuvuc:this.selectedKhuVuc,thoidiem:e};this.selectedTinh&&this.selectedKhuVuc&&this.selectedPersionUpBg&&(this.selectedDay||this.selectedThang||this.selectedQuy)?(this["storeqlda/viewBaoGiaWithSelecttionOfGuest"](s).then((function(a){if(a)if(a.data.isbuy){t.markCost=a.data.mark,t.markUserView=a.data.markuserview,t.dataArrBaoGia=a.data.pagi.data,t.pagination=a.data.pagi,t.rows=a.data.pagi.total,t.currentVote=a.data.votecur;var i=t.$refs["element_vote"],n=t.$refs["icon-element_vote"];i.style.display="block",a.data.isvote?n.classList.add("text-success"):(n.classList.remove("text-success"),n.classList.add("text-dark"))}else if(t.markCost=a.data.mark,t.markUserView=a.data.markuserview,parseInt(t.markCost)<=parseInt(t.markUserView)){if(confirm("Để xem báo giá bạn sẽ phải chuyển số điểm là : ".concat(t.markCost," điểm cho người đăng báo giá này"))){t.dataArrBaoGia=a.data.pagi.data,t.pagination=a.data.pagi,t.rows=a.data.pagi.total,t.currentVote=a.data.votecur;var l=t.$refs["element_vote"];l.style.display="block",s={check:1,idUserView:t.currentUserPersonalInfo.user.id,user_id:t.selectedPersionUpBg,tinh:t.selectedTinh,khuvuc:t.selectedKhuVuc,thoidiem:e,agreebuy:1},t["storeqlda/viewBaoGiaWithSelecttionOfGuest"](s).then((function(e){t.markUserView=e.data.mark}))}}else alert("Bạn không đủ điểm để xem báo giá này")})),this["storeqlda/getAllListDataBaoGiaGuest"](s)):alert("Bạn chưa chọn người up báo giá hoặc chưa chọn tỉnh hoặc khu vực hoặc báo giá theo tháng quý hoặc ngày")},handleApproveBaoGia:function(){var t=this;if(this.selectedTinh&&this.selectedKhuVuc&&(this.selectedDay||this.selectedThang||this.selectedQuy)){var e="";this.isMonthDisabled||(e=this.selectedThang),this.isQuyDisabled||(e=this.selectedQuy),this.isDayDisabled||(e=this.selectedDay);var s={giaVt:e+","+this.selectedKhuVuc,tinh:this.selectedTinh,user_id:this.selectedPersionUpBg,idUserApprove:this.currentUserPersonalInfo.user.id};this["storeqlda/approveGiaVtGuest"](s).then((function(a){console.log("data lan 1",a),!1===a.ok?alert(a.error):!0===a.data.exist?confirm("Báo giá này đã có trong cơ sở dữ liêu. Bạn có muốn ghi đè các dữ liệu này không?")?(s={giaVt:e+","+t.selectedKhuVuc,tinh:t.selectedTinh,user_id:t.selectedPersionUpBg,idUserApprove:t.currentUserPersonalInfo.user.id,agreeOverride:1},t["storeqlda/approveGiaVtGuest"](s).then((function(t){return alert(t.data.message)}))):(s={giaVt:e+","+t.selectedKhuVuc,tinh:t.selectedTinh,user_id:t.selectedPersionUpBg,idUserApprove:t.currentUserPersonalInfo.user.id,agreeOverride:2},t["storeqlda/approveGiaVtGuest"](s)):alert(a.data.message)}))}else alert("Bạn chưa chọn file import dữ liệu, hoặc bạn chưa chọn tỉnh hoặc khu vực hoặc báo giá theo tháng quý hoặc ngày")},getParentSelect:function(t,e){while(t.parentElement){var s=t.parentElement;if(s.matches(e))return s;t=s}},hadleClickMaDM:function(t){t.target.setAttribute("contenteditable","true")},hadleClickTenMaDM:function(t){t.target.setAttribute("contenteditable","true")},handleSave:function(t,e){var s=this,a=this.getParentSelect(t.target,".row_table_note"),i=a.querySelector(".ma_vat_tu").innerText,n=a.querySelector(".ten_vat_tu").innerText,l=a.querySelector(".don_vi").innerText,o=a.querySelector(".gia_vat_tu").innerText,r=a.querySelector(".khu_vuc").innerText,c=a.querySelector(".thoi_diem").innerText,u=a.querySelector(".nguon").innerText,d=a.querySelector(".ghi_chu").innerText,h=a.querySelector(".tinh").innerText,v=a.querySelector(".tac_gia").innerText,g=this.dataArrBaoGia[e].id,p=this["storeqlda/currentUser"].id,m={maVatTu:i,tenVatTu:n,donVi:l,giaVatTu:o,khuvuc:r,thoidiem:c,ghiChu:d,nguon:u,tinh:h,tacGia:v,idVatTu:g,idUser:p};this["storeqlda/updateDataGiaVatTuGuestUp"](m).then((function(t){!1===t.ok?alert(t.error):s.handleXemBG()}))}})}),d=u,h=(s("4895"),s("2877")),v=Object(h["a"])(d,r,c,!1,null,"378cac3a",null),g=v.exports,p={name:"viewgiavattu",components:{Approvematerialcost:g},data:function(){return{tabIndex:0}},computed:Object(n["a"])(Object(n["a"])({},Object(l["c"])(["layoutConfig"])),{},{config:function(){return this.layoutConfig()}}),mounted:function(){this.$store.dispatch(o["a"],[{title:"Bảng giá vật tư"}])},destroyed:function(){localStorage.removeItem("builderTab")},methods:{reset:function(t){t.preventDefault(),localStorage.removeItem("config"),window.location.reload()},submit:function(t){t.preventDefault(),localStorage.setItem("config",JSON.stringify(this.config)),window.location.reload()}}},m=p,f=(s("16eb"),Object(h["a"])(m,a,i,!1,null,"206032f3",null));e["default"]=f.exports},"16eb":function(t,e,s){"use strict";s("4cc2")},4895:function(t,e,s){"use strict";s("61fd")},"4cc2":function(t,e,s){},"61fd":function(t,e,s){}}]);
//# sourceMappingURL=chunk-309577b2.0cedd8b1.js.map