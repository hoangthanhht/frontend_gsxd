(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f601412"],{2751:function(t,e,s){},"2ff6":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-container",[s("CompTitle"),s("b-row",[s("CompForm")],1),s("UserTable")],1)],1)},i=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card panel-success"},[s("table",{staticClass:"table table-hover "},[t._m(0),0!==t.listUser.length?s("tbody",t._l(t.listUser,(function(t,e){return s("UserListItem",{key:t.id,attrs:{user:t,index:e+1,userId:t.id}})})),1):s("tbody",[t._m(1)])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"text-center",staticStyle:{width:"10%"}},[t._v("#")]),s("th",[t._v("Tên")]),s("th",{staticClass:"text-center",staticStyle:{width:"20%"}},[t._v("Email")]),s("th",{staticStyle:{width:"160px"}},[t._v("Action")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{attrs:{colspan:"4"}},[s("h6",{staticClass:"text-center"},[t._v("List Empty")])])])}],l=s("5530"),o=s("2f62"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{staticClass:"text-center"},[t._v(t._s(t.index))]),s("td",[t._v(t._s(t.user.name))]),s("td",{staticClass:"text-center"},[s("span",{staticClass:"badge"},[t._v(t._s(t.user.email))])]),s("td",[s("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:t.handleEdit}},[t._v(" Edit ")]),s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.handleDelete}},[t._v(" Delete ")])])])},u=[],d=(s("a9e3"),s("b0c0"),{name:"user-list-item",props:{user:{type:Object,default:null},index:Number,userId:Number},computed:{},data:function(){return{}},methods:Object(l["a"])(Object(l["a"])({},Object(o["b"])(["storeqlda/handleEdit","storeqlda/handleDeleteUserById","storeqlda/getListDataUser"])),{},{handleEdit:function(){this["storeqlda/handleEdit"](this.user)},handleDelete:function(){var t=this;confirm("Bạn có muốn xóa user có tên là "+this.user.name)&&this["storeqlda/handleDeleteUserById"](this.userId).then((function(){return t["storeqlda/getListDataUser"]()}))}})}),m=d,h=s("2877"),f=Object(h["a"])(m,c,u,!1,null,null,null),p=f.exports,b={name:"user-list-table",components:{UserListItem:p},data:function(){return{}},computed:Object(l["a"])(Object(l["a"])({},Object(o["c"])(["storeqlda/getListDataUserGTer"])),{},{listUser:function(){return this["storeqlda/getListDataUserGTer"]}}),created:function(){this["storeqlda/getListDataUser"]()},methods:Object(l["a"])({},Object(o["b"])(["storeqlda/getListDataUser"]))},v=b,g=Object(h["a"])(v,a,n,!1,null,null,null),_=g.exports,y=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},C=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-header"},[s("h1",[t._v("Bảng danh sách nhân viên")]),s("hr",{staticClass:"my-4"})])}],O={name:"comp-title",data:function(){return{}}},w=O,q=Object(h["a"])(w,y,C,!1,null,null,null),U=q.exports,j=s("25a6"),P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-col",{attrs:{cols:"12",lg:"6"}},[s("form-add"),t.isShowForm?s("form",{staticClass:"form-inline justify-content-between",attrs:{action:"",method:"POST"}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"sr-only",attrs:{for:""}},[t._v("label")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control user_name",attrs:{type:"text",placeholder:"User Name"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"sr-only",attrs:{for:""}},[t._v("label")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.useremail,expression:"useremail"}],staticClass:"form-control user_email",attrs:{type:"text",placeholder:"User Email"},domProps:{value:t.useremail},on:{input:function(e){e.target.composing||(t.useremail=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"sr-only",attrs:{for:""}},[t._v("label")]),s("input",{staticClass:"form-control password",attrs:{type:"password",placeholder:"User Password"}})]),null===t.userSelected?s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.handleAddNew}},[t._v(" Submit ")]):s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.handleEditTask}},[t._v(" Update ")]),s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.handleCancel}},[t._v(" Cancel ")])]):t._e(),t.isShowForm?s("div",[s("v-app",{staticClass:"permission"},[s("v-select",{attrs:{label:"Select",items:t.listPermission,hint:"Chọn quyền","persistent-hint":"","item-text":"slug",chips:"",multiple:"","return-object":"",outlined:""},model:{value:t.selectPermission,callback:function(e){t.selectPermission=e},expression:"selectPermission"}})],1)],1):t._e(),t.isShowForm?s("div",[s("v-app",{staticClass:"role"},[s("v-select",{attrs:{label:"Select",items:t.listRole,hint:"Chọn vai trò","persistent-hint":"","item-text":"slug",chips:"",multiple:"","return-object":"",outlined:""},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}})],1)],1):t._e()],1)},S=[],k=(s("498a"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-group add-task"},[t.isShowForm?s("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:t.toggleForm}},[t._v("Close Form")]):s("button",{staticClass:"btn btn-info btn-block",attrs:{type:"button"},on:{click:t.toggleForm}},[t._v("Add User")])])}),D=[],E={name:"form-add",data:function(){return{}},computed:Object(l["a"])({},Object(o["d"])({isShowForm:function(t){return t.storeqlda.isShowForm}})),methods:Object(l["a"])(Object(l["a"])({},Object(o["b"])(["storeqlda/toggleForm"])),{},{toggleForm:function(){return this["storeqlda/toggleForm"]()}})},x=E,F=Object(h["a"])(x,k,D,!1,null,null,null),L=F.exports,T={name:"comp-form",components:{FormAdd:L},data:function(){return{username:"",useremail:"",userId:Number,select:[],selectPermission:[]}},computed:Object(l["a"])(Object(l["a"])(Object(l["a"])({},Object(o["c"])(["storeqlda/getListDataRoleGTer","storeqlda/getListDataRoleOfAllUserGTer","storeqlda/getListDataPermissionOfAllUserGTer","storeqlda/getListDataPermissionGTer"])),Object(o["d"])({isShowForm:function(t){return t.storeqlda.isShowForm},userSelected:function(t){return t.storeqlda.userSelected}})),{},{listRole:function(){var t=[],e=this["storeqlda/getListDataRoleGTer"];for(var s in e){var r={role_id:e[s].id,slug:e[s].slug};t.push(r)}return t},listPermission:function(){var t=[],e=this["storeqlda/getListDataPermissionGTer"];for(var s in e){var r={permission_id:e[s].id,slug:e[s].slug};t.push(r)}return t}}),watch:{userSelected:function(t){null!==t&&(this.username=t.name,this.useremail=t.email,this.userId=t.id),this.getRoleOfUserForEdit(),this.getPermissionOfUserForEdit()}},methods:Object(l["a"])(Object(l["a"])({},Object(o["b"])(["storeqlda/toggleForm","storeqlda/handleAddNewUser","storeqlda/handleEditUserById","storeqlda/getListDataUser"])),{},{getRoleOfUserForEdit:function(){var t=this["storeqlda/getListDataRoleOfAllUserGTer"],e=t,s=!1;for(var r in e){for(var i in e[r])if(e[r].hasOwnProperty(i)&&parseInt(i)===this.userId){t=e[r][i],s=!0;break}if(!0===s)break}for(var a in this.select=[],t)for(var n in this.listRole)this.listRole[n]["slug"]===t[a]&&this.select.push(this.listRole[n])},getPermissionOfUserForEdit:function(){var t=this["storeqlda/getListDataPermissionOfAllUserGTer"],e=t,s=!1;for(var r in e){for(var i in e[r])if(e[r].hasOwnProperty(i)&&parseInt(i)===this.userId){t=e[r][i],s=!0;break}if(!0===s)break}for(var a in this.selectPermission=[],t)for(var n in this.listPermission)this.listPermission[n]["slug"]===t[a]&&this.selectPermission.push(this.listPermission[n])},handleEditTask:function(){var t=this,e=[];for(var s in this.select)e.push(this.select[s].role_id);var r=[];for(var i in this.selectPermission)r.push(this.selectPermission[i].permission_id);var a=document.querySelector(".password").value,n={name:this.username,email:this.useremail,password:a,idUser:this.userId,role_id:JSON.stringify(e),permission_id:JSON.stringify(r)};this["storeqlda/handleEditUserById"](n).then((function(){t["storeqlda/getListDataUser"]()})),this.handleResetData()},handleAddNew:function(){var t=this;if(this.username.trim()&&this.useremail.trim()){var e=document.querySelector(".password").value,s=[];for(var r in this.select)s.push(this.select[r].role_id);var i=[];for(var a in this.selectPermission)i.push(this.selectPermission[a].permission_id);var n={name:this.username,email:this.useremail,password:e,role_id:JSON.stringify(s),permission_id:JSON.stringify(i)};this["storeqlda/handleAddNewUser"](n).then((function(){return t["storeqlda/getListDataUser"]()})),this.handleCancel()}else alert("Vui lòng nhập đầy đủ các trường")},handleCancel:function(){this["storeqlda/toggleForm"](),this.handleResetData()},handleResetData:function(){this.username="",this.useremail="",this.select=null}})},$=T,I=(s("d1f9"),s("6544")),N=s.n(I),R=(s("df86"),s("7560")),A=s("58df"),G=Object(A["a"])(R["a"]).extend({name:"v-app",props:{dark:{type:Boolean,default:void 0},id:{type:String,default:"app"},light:{type:Boolean,default:void 0}},computed:{isDark:function(){return this.$vuetify.theme.dark}},beforeCreate:function(){if(!this.$vuetify||this.$vuetify===this.$root)throw new Error("Vuetify is not properly initialized, see https://vuetifyjs.com/getting-started/quick-start#bootstrapping-the-vuetify-object")},render:function(t){var e=t("div",{staticClass:"v-application--wrap"},this.$slots.default);return t("div",{staticClass:"v-application",class:Object(l["a"])({"v-application--is-rtl":this.$vuetify.rtl,"v-application--is-ltr":!this.$vuetify.rtl},this.themeClasses),attrs:{"data-app":!0},domProps:{id:this.id}},[e])}}),B=s("b974"),J=Object(h["a"])($,P,S,!1,null,null,null),V=J.exports;N()(J,{VApp:G,VSelect:B["a"]});var z={components:{CompForm:V,CompTitle:U,UserTable:_},mounted:function(){this.$store.dispatch(j["a"],[{title:"Quản lý phân quyền"}])}},Q=z,H=(s("503e"),Object(h["a"])(Q,r,i,!1,null,"219fc4a8",null));e["default"]=H.exports},"503e":function(t,e,s){"use strict";s("2751")},d1f9:function(t,e,s){"use strict";s("f90c")},df86:function(t,e,s){},f90c:function(t,e,s){}}]);
//# sourceMappingURL=chunk-2f601412.1288f9a3.js.map