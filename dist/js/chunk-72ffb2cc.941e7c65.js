(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72ffb2cc"],{"496f":function(t,e,n){},"739a":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"block-select"},[n("div",{staticClass:"btn-add-cv"},[n("b-button",{staticClass:"mb-2 add-cv icon-tvgs pt-4 pb-4",attrs:{size:"sm"},on:{click:t.handleClick}},[t._v(" Xem báo cáo ")])],1),n("div",{staticClass:"select-cbb"},[n("b-form-select",{attrs:{options:t.site},scopedSlots:t._u([{key:"first",fn:function(){return[n("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Theo công trường --")])]},proxy:!0}]),model:{value:t.selectedSite,callback:function(e){t.selectedSite=e},expression:"selectedSite"}})],1),n("div",{staticClass:"select-cbb"},[n("b-form-select",{attrs:{options:t.time},scopedSlots:t._u([{key:"first",fn:function(){return[n("b-form-select-option",{attrs:{value:"",disabled:""}},[t._v("-- Theo thời gian --")])]},proxy:!0}]),model:{value:t.selectedTime,callback:function(e){t.selectedTime=e},expression:"selectedTime"}})],1),n("div",{staticClass:"search-congv"},[n("b-input-group",{staticClass:"mb-2 add-cv icon-tvgs",attrs:{size:"sm"}},[n("b-form-input",{attrs:{type:"search",placeholder:"Search terms"}}),n("b-input-group-prepend",{attrs:{"is-text":""}},[n("b-icon",{attrs:{icon:"search"}})],1),n("b-input-group-prepend",{attrs:{"is-text":""}},[n("b-icon",{attrs:{icon:"arrow-repeat"}})],1)],1)],1)]),t._l(t.jsonArrResponse,(function(e,a){return n("div",{key:a,staticClass:"bccontainer pt-10"},[n("div",{staticClass:"baocao",attrs:{contenteditable:"true"}},[n("div",{staticClass:"kindBC flex items-center h-24"},[n("p",{staticClass:"text-3xl pl-60"},[t._v("BÁO CÁO THÁNG TƯ VẤN GIÁM SÁT")]),n("div",{staticClass:"action hidden flex pl-8"},[n("div",{staticClass:"pr-5"},[n("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.handleEdit(e,a)}}},[t._v(" Update ")])]),n("div",[n("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.handleDelete(a)}}},[t._v(" Delete ")])])])]),n("p",{staticClass:"dateBC"},[t._v(" Từ ngày "+t._s(t.getdate[0])+" đến ngày "+t._s(t.getdate[1])+" ")]),n("div",{staticClass:"project"},[n("p",{staticClass:"project_title"},[t._v("Dự án:")]),n("p",{staticClass:"ten_du_an"},[t._v(t._s(t.duan[a]))])]),n("div",{staticClass:"address"},[n("p",{staticClass:"project_title"},[t._v("Địa điểm:")]),n("p",{staticClass:"dia_diem_du_an"},[t._v(t._s(t.diadiem[a]))])]),n("div",{staticClass:"reccept"},[n("p",{staticClass:"project_title"},[t._v("Nơi nhận:")]),n("div",{staticClass:"name_reccept"},[n("p",[t._v("- Chủ đầu tư : "),n("span",{staticClass:"chu_dau_tu"},[t._v(t._s(t.cdt[a]))])]),n("p",[t._v("- Ban quản lý dự án : "),n("span",{staticClass:"ban_quan_ly"},[t._v(t._s(t.bql[a]))])]),n("p",[t._v("- Đồng gửi Văn phòng Công ty TVGS")])])]),n("p",{staticClass:"baocao_muc"},[t._v("I. CÔNG TÁC VĂN PHÒNG, HỒ SƠ, VĂN BẢN CỦA TVGS")]),t._l(t.hoSoArr[a],(function(e,a){return n("div",{key:"HS"+a,staticClass:"baocao_hosongthu"},[n("p",{staticClass:"baocao_contentcvngthu-noidunghoso"},[t._v(" "+t._s(e)+" ")])])})),n("p",{staticClass:"baocao_muc"},[t._v("II. CÔNG TÁC GIÁM SÁT THI CÔNG XÂY DỰNG")]),n("div",{staticClass:"baocao_contentcvngthu"},[t._l(t.tenNT[a],(function(e,s){return[n("div",{key:s,ref:"nament",refInFor:!0,staticClass:"baocao_contentcvngthu-nament"},[n("p",{staticClass:"nament"},[t._v(" "+t._s(e)+" ")]),t._l(t.getTencvNthu(a,e),(function(c,i){return[n("div",{key:"A"+i+s,staticClass:"baocao_contentcvngthu-mucngthu"},[t._v(" "+t._s(c)+" ")]),t._l(t.getNdcvNthu(a,e,c),(function(e,a){return n("p",{key:"B"+i+s+a,staticClass:"baocao_contentcvngthu-noidung"},[t._v(" "+t._s(e)+" ")])}))]}))],2)]}))],2),n("p",{staticClass:"baocao_muc"},[t._v("III. KIẾN NGHỊ, KHUYẾN CÁO CỦA TƯ VẤN GIÁM SÁT")]),t._l(t.kienNghiArr[a],(function(e,a){return n("div",{key:"KN"+a,staticClass:"baocao_kiennghi"},[n("p",{staticClass:"baocao_contentcvngthu-noidungkiennghi"},[t._v(" "+t._s(e)+" ")])])})),n("p",{staticClass:"baocao_muc"},[t._v(" IV. CÔNG TÁC AN TOÀN LAO ĐỘNG, VỆ SINH MÔI TRƯỜNG, PHÒNG CHÁY CHỮA CHÁY ")]),t._l(t.anToanArr[a],(function(e,a){return n("div",{key:"AT"+a,staticClass:"baocao_antoan"},[n("p",{staticClass:"baocao_contentcvngthu-noidungantoan"},[t._v(" "+t._s(e)+" ")])])})),n("p",{staticClass:"baocao_muc"},[t._v("V. HÌNH ẢNH ĐÍNH KÈM (NẾU CÓ)")]),n("div",{staticClass:"img_list"},t._l(t.imgArr[a],(function(e,s){return n("div",{key:s,staticClass:"img_list-item"},[n("img",{staticClass:"img_list-contentimg",attrs:{src:t.getStringUrl(a,s)}})])})),0),t._m(0,!0),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")],2)])}))],2)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"baocao_footbc flex justify-between"},[n("div",[n("h5",{staticClass:"pt-2 pl-2"},[t._v("THAY MẶT ĐOÀN TƯ VẤN GIÁM SÁT")]),n("p",[t._v("Trưởng đoàn tư vấn giám sát")])]),n("div",[n("h5",{staticClass:"pt-2"},[t._v("NGƯỜI LÀM BÁO CÁO")]),n("p",{staticStyle:{"margin-right":"0"}},[t._v("Trưởng đoàn tư vấn giám sát")])])])}],c=n("5530"),i=(n("ac1f"),n("1276"),n("b64b"),n("99af"),n("5319"),n("2f62")),r=n("25a6"),o={name:"tvgs-header",data:function(){return{indexMuc:[],selectedFile:null,dataGiamSat:[],mucArr:[],ndcvArr:[],tenNT:[],tenCvNthu:[],imgArr:[],hoSoArr:[],kienNghiArr:[],anToanArr:[],diadiem:[],duan:[],cdt:[],bql:[],jsonResponse:null,jsonArrResponse:[],selectedTime:"",time:[],selectedSite:null,site:[]}},mounted:function(){this.$store.dispatch(r["a"],[{title:"Báo cáo tháng"}])},created:function(){var t=this,e={kind:"M"};this["storeqlda/getNameProject"](e).then((function(e){var n=e.data;for(var a in n){var s={value:n[a].tenDuan,text:n[a].tenDuan};t.site.push(s)}}))},watch:{selectedSite:function(){var t=this,e={kind:"M",site:this.selectedSite};this.time=[],this["storeqlda/getTimeBaoCao"](e).then((function(e){var n=e.data;for(var a in n){var s={value:n[a].dateBaocao,text:n[a].dateBaocao};t.time.push(s)}}))}},computed:Object(c["a"])(Object(c["a"])({},Object(i["c"])(["currentUserPersonalInfo","storeqlda/currentUser"])),{},{getdate:function(){var t=this.selectedTime.split("-");return t}}),methods:Object(c["a"])(Object(c["a"])({},Object(i["b"])(["storeqlda/getTimeBaoCao","storeqlda/getListReport","storeqlda/getNameProject","storeqlda/deleteReport","storeqlda/updateReport"])),{},{getStringUrl:function(t,e){return this.imgArr[t][e]},getTencvNthu:function(t,e){return Object.keys(this.dataGiamSat[t][this.mucArr[t][1]][e])},getNdcvNthu:function(t,e,n){return this.dataGiamSat[t][this.mucArr[t][1]][e][n]},handleDelete:function(t){var e=this.jsonResponse.data.data,n=this["storeqlda/currentUser"].id;if(n==e[t].user_id){var a=e[t].id;this["storeqlda/deleteReport"](a).then((function(t){alert(t.data.message)}))}else alert("Bạn không được phép xóa báo cáo của người khác")},getParentSelect:function(t,e){while(t.parentElement){var n=t.parentElement;if(n.matches(e))return n;t=n}},handleEdit:function(t,e){var n,a=this.getParentSelect(t.target,".baocao"),s=a.querySelectorAll(".baocao_muc"),c=a.querySelectorAll(".baocao_contentcvngthu-noidunghoso"),i=a.querySelectorAll(".baocao_contentcvngthu-nament"),r=null,o=a.querySelectorAll(".nament"),l=a.querySelectorAll(".baocao_contentcvngthu-noidungkiennghi"),u=a.querySelectorAll(".baocao_contentcvngthu-noidungantoan"),d=a.querySelector(".ten_du_an"),h=a.querySelector(".dia_diem_du_an"),p=a.querySelector(".chu_dau_tu"),v=a.querySelector(".ban_quan_ly"),_="",m="",g="",b="";for(n=0;n<c.length;n++)b=""==b?'"'.concat(c[n].innerText,'"'):b+","+'"'.concat(c[n].innerText,'"');for(_='"'.concat(s[0].innerText,'":[').concat(b,"]"),b="",n=0;n<l.length;n++)b=""==b?'"'.concat(l[n].innerText,'"'):b+","+'"'.concat(l[n].innerText,'"');for(m='"'.concat(s[2].innerText,'":[').concat(b,"]"),b="",n=0;n<u.length;n++)b=""==b?'"'.concat(u[n].innerText,'"'):b+","+'"'.concat(u[n].innerText,'"');g='"'.concat(s[3].innerText,'":[').concat(b,"]"),b="";var f="",C="",T="";for(n=0;n<i.length;n++){r=i[n].querySelectorAll(".baocao_contentcvngthu-mucngthu");for(var S=0;S<r.length;S++){var N=r[S].nextElementSibling;while(N)if(b=""==b?'"'.concat(N.innerText,'"'):b+","+'"'.concat(N.innerText,'"'),N=N.nextElementSibling,null!==N&&"P"!=N.tagName)break;f=""==f?'"'.concat(r[S].innerText,'":[').concat(b,"]"):f+","+'"'.concat(r[S].innerText,'":[').concat(b,"]"),b=""}C=""==C?'"'.concat(o[n].innerText,'":{').concat(f,"}"):C+","+'"'.concat(o[n].innerText,'":{').concat(f,"}"),f=""}C='"'.concat(s[1].innerText,'":{').concat(C,"}"),T="{".concat(_,",").concat(C,",").concat(m,",").concat(g,"}");var A=this["storeqlda/currentUser"].id;if(A==this.jsonArrResponse[e].user_id){var k={contentJson:T,dateBaocao:this.selectedTime,tenDuan:d.innerText,diaDiem:h.innerText,chuDauTu:p.innerText,banQuanLy:v.innerText,idReport:this.jsonArrResponse[e].id};this["storeqlda/updateReport"](k).then((function(t){alert(t.data.message)}))}else alert("Bạn không được phép sửa báo cáo của người khác")},handleClick:function(){var t=this,e={time:this.selectedTime.replace(/\//g,"_"),nameProj:this.selectedSite};this.duan=[],this.diadiem=[],this.cdt=[],this.bql=[],this.mucArr=[],this.tenNT=[],this.hoSoArr=[],this.kienNghiArr=[],this.anToanArr=[],this.dataGiamSat=[],this.imgArr=[],this["storeqlda/getListReport"](e).then((function(e){t.jsonResponse=e,t.jsonArrResponse=e.data.data;var n=t.jsonArrResponse;for(var a in n)n.length>0&&(n[a].contentJson&&t.dataGiamSat.push(JSON.parse(n[a].contentJson.replace(/\\/g,""))),n[a].imgBase64&&t.imgArr.push(JSON.parse(n[a].imgBase64.replace(/\\/g,""))),n[a].tenDuan&&t.duan.push(n[a].tenDuan),n[a].diaDiem&&t.diadiem.push(n[a].diaDiem),n[a].chuDauTu&&t.cdt.push(n[a].chuDauTu),n[a].banQuanLy&&t.bql.push(n[a].banQuanLy),t.mucArr.push(Object.keys(t.dataGiamSat[a])),t.tenNT.push(Object.keys(t.dataGiamSat[a][t.mucArr[a][1]])),t.hoSoArr.push(t.dataGiamSat[a][t.mucArr[a][0]]),t.kienNghiArr.push(t.dataGiamSat[a][t.mucArr[a][2]]),t.anToanArr.push(t.dataGiamSat[a][t.mucArr[a][3]]))}))}})},l=o,u=(n("9c4f"),n("2877")),d=Object(u["a"])(l,a,s,!1,null,"5775c15e",null);e["default"]=d.exports},"9c4f":function(t,e,n){"use strict";n("496f")}}]);
//# sourceMappingURL=chunk-72ffb2cc.941e7c65.js.map