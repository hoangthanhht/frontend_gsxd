(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55dfdb96"],{"0b4b":function(t,e,a){},"1fd2":function(t,e,a){"use strict";a("5db8")},"278f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"them-hd"},[a("div",{staticClass:"body-hstk"},[a("div",{staticClass:"form-add-hd"},[a("h5",[t._v("Cập nhật thông tin hợp đồng")]),a("div",{staticClass:"hd-gr1"},[a("p",[t._v("Tên hợp đồng:")]),a("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Nhập tên hợp đồng",required:""},model:{value:t.nameContract,callback:function(e){t.nameContract=e},expression:"nameContract"}})],1),a("div",{staticClass:"hd-gr3"},[a("p",{staticClass:"pt-2"},[t._v("Loại hợp đồng:")]),a("multiselect",{attrs:{"custom-label":t.custom_label,label:"name","track-by":"id",selectLabel:"Ấn enter để chọn",deselectLabel:"Ấn enter để bỏ chọn",options:t.kind_contract},model:{value:t.selectedKindContract,callback:function(e){t.selectedKindContract=e},expression:"selectedKindContract"}})],1),a("div",{staticClass:"hd-gr2"},[a("div",{staticClass:"du-an-moi"},[a("p",{staticClass:"pt-2"},[t._v("Dự án (Thêm mới)")]),a("multiselect",{attrs:{"custom-label":t.custom_label,label:"name","track-by":"id",selectLabel:"Ấn enter để chọn",deselectLabel:"Ấn enter để bỏ chọn",options:t.project},model:{value:t.selectedProject,callback:function(e){t.selectedProject=e},expression:"selectedProject"}})],1),a("div",{staticClass:"gia-tri-hd"},[a("p",{staticClass:"pt-2"},[t._v("Giá trị theo HĐ/PLHĐ")]),a("b-form-input",{staticStyle:{height:"43px"},attrs:{id:"input-1",type:"text",placeholder:"Nhập giá trị hợp đồng",required:""},model:{value:t.valueContract,callback:function(e){t.valueContract=e},expression:"valueContract"}})],1)]),a("div",{staticClass:"hd-gr3"},[a("p",{staticClass:"pt-2"},[t._v("Nhân sự liên quan:")]),a("multiselect",{attrs:{multiple:"","custom-label":t.custom_label,label:"name","track-by":"id",selectLabel:"Ấn enter để chọn",deselectLabel:"Ấn enter để bỏ chọn",options:t.persion_do},model:{value:t.selectedPersionDo,callback:function(e){t.selectedPersionDo=e},expression:"selectedPersionDo"}})],1),a("h5",[t._v("Khối lượng thực hiện theo hợp đồng")]),a("div",{staticClass:"hd-gr4"},[a("div",{staticClass:"hd-bat-dau"},[a("p",{staticClass:"pt-2"},[t._v("Bắt đầu:")]),a("b-form-input",{attrs:{id:"input-1",type:"date",required:""},model:{value:t.timeStart,callback:function(e){t.timeStart=e},expression:"timeStart"}})],1),a("div",{staticClass:"hd-ket-thuc"},[a("p",{staticClass:"pt-2"},[t._v("Kết thúc:")]),a("b-form-input",{attrs:{id:"input-1",type:"date",required:""},model:{value:t.timeFinish,callback:function(e){t.timeFinish=e},expression:"timeFinish"}})],1)]),a("div",[a("p",{staticClass:"pt-2"},[t._v("Đơn vị (Thêm mới)")]),a("multiselect",{attrs:{"custom-label":t.custom_label,label:"name","track-by":"id",selectLabel:"Ấn enter để chọn",deselectLabel:"Ấn enter để bỏ chọn",options:t.unit},model:{value:t.selectedUnit,callback:function(e){t.selectedUnit=e},expression:"selectedUnit"}})],1),a("div",[a("p",{staticClass:"pt-2"},[t._v("Khối lượng")]),a("b-form-input",{staticStyle:{height:"34px"},attrs:{id:"input-1",type:"text",placeholder:"Nhập tên công việc",required:""},model:{value:t.mass,callback:function(e){t.mass=e},expression:"mass"}})],1),a("div",{staticClass:"add-gr5"},[a("h5",[t._v("File và tài liệu liên quan")]),a("div",{staticClass:"flex justify-between"},[a("input",{staticClass:"cursor-pointer",attrs:{multiple:"",type:"file",name:"",id:""},on:{change:function(e){return t.onFileChange(e)}}}),t._m(0)]),t.arrItem.length>0?a("div",t._l(t.arrItem,(function(e,i){return a("div",{key:i,staticClass:"nguon text-muted font-weight-bold flex justify-between pt-2"},[a("div",{staticClass:"flex"},[a("a",{staticStyle:{"line-height":"24px"},attrs:{href:t.addressServe+t.arrItem[i].path}},[t._v(" File "+t._s(i+1)+" : ")]),a("input",{staticClass:"rootNameFile ml-24",attrs:{type:"text"},domProps:{value:t.arrItem[i].rootName}})]),a("div",[a("i",{staticClass:"menu-icon cursor-pointer flaticon2-rubbish-bin text-white pl-2 pr-2 bg-red-600",on:{click:function(e){return t.handleDelete(i)}}})])])})),0):t._e()])]),a("div",{staticClass:"hstk_note"},[a("div",{staticClass:"add-gr41"},[a("b-tabs",{attrs:{"content-class":"mt-3"}},[a("b-tab",{attrs:{title:"First",active:""}},[a("p",[t._v("I'm the first tab")])]),a("b-tab",{attrs:{title:"Second"}},[a("p",[t._v("I'm the second tab")])])],1)],1),t._m(1)])]),a("div",{staticClass:"hs-gr6"},[a("div",{staticClass:"add-gr51"},[a("b-button",{staticClass:"mb-2 tao-cv",attrs:{size:"sm"}},[a("b-icon",{attrs:{icon:"x-octagon-fill","aria-hidden":"true"}}),t._v(" Bỏ qua ")],1)],1),t.idCurrentContract?a("div",{staticClass:"add-gr51 add-gr52"},[a("b-button",{ref:"kt_save_changes",staticClass:"mb-2 tao-cv",attrs:{size:"sm"},on:{click:t.handleUpdate}},[a("b-icon",{attrs:{icon:"check2","aria-hidden":"true"}}),t._v(" Cập nhật ")],1)],1):a("div",{staticClass:"add-gr51 add-gr52"},[a("b-button",{ref:"kt_save_changes",staticClass:"mb-2 tao-cv",attrs:{size:"sm"},on:{click:t.handleSave}},[a("b-icon",{attrs:{icon:"check2","aria-hidden":"true"}}),t._v(" Tạo hợp đồng ")],1)],1)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex"},[a("input",{attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-gr41"},[a("p",[t._v(" Tên nhân viên ghi chú Thời điểm ghi chú Đây là mẫu format ghi chú. Nội dung ghi chú sẽ được hiển thị ở đây ")])])}],s=a("b85c"),r=a("5530"),c=(a("b0c0"),a("4de4"),a("8e5f")),l=a.n(c),o=a("2f62"),d=a("25a6"),h={components:{Multiselect:l.a},data:function(){return{idCurrentContract:null,nameContract:"",arrItem:[],fileData:[],valueContract:"",timeStart:"",timeFinish:"",mass:"",selectedKindContract:null,kind_contract:[{id:"1",text:"Hợp đồng trọn gói"},{id:"2",text:"Hợp đồng đơn giá cố định"},{id:"3",text:"Hợp đồng đơn giá thay đổi"}],selectedPersionDo:null,persion_do:[],selectedProject:null,project:[],selectedUnit:null,unit:[],isActive:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["storeqlda/getListDataUserGTer","currentUserPersonalInfo","storeqlda/currentUser"])),Object(o["d"])({addressServe:function(t){return t.storeqlda.addressServe}})),mounted:function(){this.$store.dispatch(d["a"],[{title:"Tạo hợp đồng"}])},created:function(){var t=this;this.idCurrentContract=this.$route.params.id,void 0!==this.idCurrentContract&&this["storeqlda/getContractWithId"](this.idCurrentContract).then((function(e){t.nameContract=e.data.pagi.tenHopDong,t.valueContract=e.data.pagi.giaTriHD,t.timeStart=e.data.pagi.batDau,t.timeFinish=e.data.pagi.ketThuc,t.mass=e.data.pagi.khoiLuong,t.selectedKindContract=JSON.parse(e.data.pagi.loaiHopDong),t.selectedPersionDo=JSON.parse(e.data.pagi.nhanSuLienQuan),t.selectedProject=JSON.parse(e.data.pagi.duAn),t.selectedUnit=JSON.parse(e.data.pagi.donVi),t.arrItem=e.data.item})),this["storeqlda/getListDataUser"]().then((function(){var e=t["storeqlda/getListDataUserGTer"];for(var a in e){var i={id:e[a].id,text:e[a].name};t.persion_do.push(i)}})),this["storeqlda/getListProjectName"]().then((function(e){var a=e.data;for(var i in a){var n={id:a[i].id,text:a[i].tenDuAn};t.project.push(n)}}))},methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["storeqlda/ActionCreateContract","storeqlda/getListDataUser","storeqlda/getListProjectName","storeqlda/getContractWithId","storeqlda/ActionUpdateContract","storeqlda/destroyFileAttachTask"])),{},{custom_label:function(t){var e=t.text;return"".concat(e)},handleDelete:function(t){var e=this;confirm("Bạn có chắc chắn muốn xóa dữ liệu này không?")&&this["storeqlda/destroyFileAttachTask"](this.arrItem[t].id).then((function(a){e.arrItem=e.arrItem.filter((function(a){return a.id!==e.arrItem[t].id})),alert(a.data.msg)}))},onFileChange:function(t){var e=this,a=t.target.files;if(this.fileData=[],"function"===typeof FileReader){var i,n=Object(s["a"])(a);try{var r=function(){var t=i.value,a=new FileReader;a.readAsDataURL(t),a.onload=function(){e.fileData.push(t)}};for(n.s();!(i=n.n()).done;)r()}catch(c){n.e(c)}finally{n.f()}}else alert("Sorry, FileReader API not supported")},handleUpdate:function(){for(var t=this,e=document.querySelectorAll(".rootNameFile"),a={},i=0;i<e.length;i++)a[this.arrItem[i].id]=e[i].value;var n={tenHopDong:this.nameContract,loaiHopDong:JSON.stringify(this.selectedKindContract),duAn:JSON.stringify(this.selectedProject),giaTriHD:this.valueContract,nhanSuLienQuan:JSON.stringify(this.selectedPersionDo),batDau:this.timeStart,ketThuc:this.timeFinish,donVi:JSON.stringify(this.selectedUnit),khoiLuong:this.mass,idContract:this.idCurrentContract,objFile:this.fileData,arrNameFile:JSON.stringify(a)},s=this.$refs["kt_save_changes"];s.classList.add("spinner","spinner-light","spinner-right"),setTimeout((function(){t["storeqlda/ActionUpdateContract"](n).then((function(t){alert(t.data)})),s.classList.remove("spinner","spinner-light","spinner-right")}),2e3)},handleSave:function(){var t=this,e={tenHopDong:this.nameContract,loaiHopDong:JSON.stringify(this.selectedKindContract),duAn:JSON.stringify(this.selectedProject),giaTriHD:this.valueContract,nhanSuLienQuan:JSON.stringify(this.selectedPersionDo),batDau:this.timeStart,ketThuc:this.timeFinish,donVi:JSON.stringify(this.selectedUnit),khoiLuong:this.mass,objFile:this.fileData},a=this.$refs["kt_save_changes"];a.classList.add("spinner","spinner-light","spinner-right"),setTimeout((function(){t["storeqlda/ActionCreateContract"](e).then((function(t){alert(t.data)})),a.classList.remove("spinner","spinner-light","spinner-right")}),2e3)}})},u=h,p=(a("60bc"),a("1fd2"),a("2877")),m=Object(p["a"])(u,i,n,!1,null,"5fa2a52e",null);e["default"]=m.exports},"5db8":function(t,e,a){},"60bc":function(t,e,a){"use strict";a("0b4b")}}]);
//# sourceMappingURL=chunk-55dfdb96.28804334.js.map