(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b62672e8"],{"0b4b":function(t,e,a){},"3ca7":function(t,e,a){},"60bc":function(t,e,a){"use strict";a("0b4b")},7683:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"muchoso"},[a("div",{staticClass:"btn-muchs"},[a("router-link",{staticClass:"add-cv",attrs:{to:"/themhoso",tag:"b-button"}},[t._v("Hồ Sơ Nghiệm Thu")])],1),a("div",{staticClass:"btn-muchs"},[a("router-link",{staticClass:"add-cv",attrs:{to:"/hosotke",tag:"b-button"}},[t._v("Hồ Sơ Thiết Kế")])],1),a("div",{staticClass:"btn-muchs"},[a("router-link",{staticClass:"add-cv",attrs:{to:"/hosokhac",tag:"b-button"}},[t._v("Loại Hồ Sơ Khác")])],1)])},s=[],n={data:function(){return{isActive:!1}},methods:{handleClick:function(){this.$emit("handleClick")}}},r=n,o=(a("b721"),a("2877")),c=Object(o["a"])(r,i,s,!1,null,"f1fbb12c",null);e["a"]=c.exports},8609:function(t,e,a){"use strict";a("b185")},b185:function(t,e,a){},b721:function(t,e,a){"use strict";a("3ca7")},d725:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"them-hs-ngthu"},[a("div",[a("CompThemHs",{attrs:{isActive:t.isActive},on:{handleClick:t.handleClick}})],1),a("div",{staticClass:"body-hstk"},[a("div",{staticClass:"form-add-hs-nghthu"},[a("h4",[t._v("Cập nhật thông tin Hồ sơ thiết kế")]),a("div",{staticClass:"hs-gr1"},[a("div",{staticClass:"gr-ten-hs"},[a("p",[t._v("Tên hồ sơ thiết kế & thay đổi thiết kế:")]),a("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Nhập tên công việc",required:""},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}})],1),a("div",{staticClass:"gr-sl"},[a("p",[t._v("Ngày nhận:")]),a("b-form-input",{attrs:{id:"input-1",type:"date",required:""},model:{value:t.timeReceive,callback:function(e){t.timeReceive=e},expression:"timeReceive"}})],1)]),a("div",{staticClass:"select-for-hs"},[a("p",{staticClass:"pt-2"},[t._v("Chọn dự án:")]),a("div",[a("multiselect",{attrs:{"custom-label":t.custom_label,label:"name","track-by":"id",selectLabel:"Ấn enter để chọn",deselectLabel:"Ấn enter để bỏ chọn",options:t.project},model:{value:t.selectedProject,callback:function(e){t.selectedProject=e},expression:"selectedProject"}})],1)]),a("div",{staticClass:"hs-gr2"},[a("p",{staticClass:"pt-2"},[t._v("Nội dung tk/ thay đổi tk:")]),a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Lưu ý",rows:"3","max-rows":"6"},model:{value:t.contentChange,callback:function(e){t.contentChange=e},expression:"contentChange"}})],1),a("div",{staticClass:"hs-gr3"},[a("p",{staticClass:"pt-2"},[t._v("Nguyên nhân thay đổi:")]),a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Lưu ý",rows:"3","max-rows":"6"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1),a("div",{staticClass:"hs-gr4"},[a("p",{staticClass:"pt-2"},[t._v("Người phê duyệt:")]),a("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Nhập tên người phê duyệt",required:""},model:{value:t.approver,callback:function(e){t.approver=e},expression:"approver"}}),a("p",{staticClass:"pt-2"},[t._v("Nhận xét của TVGS về Hồ sơ thiết kế và thay đổi TK")]),a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Lưu ý",rows:"3","max-rows":"6"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),a("div",{staticClass:"hs-gr5"},[a("p",{staticClass:"pt-2"},[t._v("File và tài liệu liên quan")]),a("div",{staticClass:"flex justify-between"},[a("input",{staticClass:"cursor-pointer",attrs:{multiple:"",type:"file",name:"",id:""},on:{change:function(e){return t.onFileChange(e)}}}),t._m(0)]),t.arrItem.length>0?a("div",t._l(t.arrItem,(function(e,i){return a("div",{key:i,staticClass:"nguon text-muted font-weight-bold flex justify-between pt-2"},[a("div",{staticClass:"flex"},[a("a",{staticStyle:{"line-height":"24px"},attrs:{href:t.addressServe+t.arrItem[i].path}},[t._v(" File "+t._s(i+1)+" : ")]),a("input",{staticClass:"rootNameFile ml-24",attrs:{type:"text"},domProps:{value:t.arrItem[i].rootName}})]),a("div",[a("i",{staticClass:"menu-icon cursor-pointer flaticon2-rubbish-bin text-white pl-2 pr-2 bg-red-600",on:{click:function(e){return t.handleDelete(i)}}})])])})),0):t._e()])]),a("div",{staticClass:"hstk_note"},[a("div",{staticClass:"add-gr41"},[a("b-tabs",{attrs:{"content-class":"mt-3"}},[a("b-tab",{attrs:{title:"First",active:""}},[a("p",[t._v("I'm the first tab")])]),a("b-tab",{attrs:{title:"Second"}},[a("p",[t._v("I'm the second tab")])])],1)],1),t._m(1)])]),a("div",{staticClass:"hs-gr6"},[a("div",{staticClass:"add-gr51"},[a("b-button",{staticClass:"mb-2 tao-cv",attrs:{size:"sm"}},[a("b-icon",{attrs:{icon:"x-octagon-fill","aria-hidden":"true"}}),t._v(" Bỏ qua ")],1)],1),t.idCurrentFile?a("div",{staticClass:"add-gr51 add-gr52"},[a("b-button",{ref:"kt_save_changes",staticClass:"mb-2 tao-cv",attrs:{size:"sm"},on:{click:t.handleUpdate}},[a("b-icon",{attrs:{icon:"check2","aria-hidden":"true"}}),t._v(" Cập nhật ")],1)],1):a("div",{staticClass:"add-gr51 add-gr52"},[a("b-button",{ref:"kt_save_changes",staticClass:"mb-2 tao-cv",attrs:{size:"sm"},on:{click:t.handleSave}},[a("b-icon",{attrs:{icon:"check2","aria-hidden":"true"}}),t._v(" Tạo hồ sơ ")],1)],1)])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex"},[a("input",{attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-gr41"},[a("p",[t._v(" Tên nhân viên ghi chú Thời điểm ghi chú Đây là mẫu format ghi chú. Nội dung ghi chú sẽ được hiển thị ở đây ")])])}],n=a("b85c"),r=a("5530"),o=(a("4de4"),a("7683")),c=a("2f62"),l=a("8e5f"),h=a.n(l),d=a("25a6"),u={data:function(){return{idCurrentFile:null,comment:"",approver:"",reason:"",contentChange:"",timeReceive:"",fileName:"",selectedProject:null,project:[],isActive:!1,fileData:[],arrItem:[]}},components:{CompThemHs:o["a"],Multiselect:h.a},mounted:function(){this.$store.dispatch(d["a"],[{title:"Hồ sơ thiết kế"}])},created:function(){var t=this;this.idCurrentFile=this.$route.params.id,void 0!==this.idCurrentFile&&this["storeqlda/getFileWithId"](this.idCurrentFile).then((function(e){t.comment=e.data.pagi.yKienTVGS,t.approver=e.data.pagi.nguoiPheDuyet,t.reason=e.data.pagi.nguyenNhanThayDoiTk,t.contentChange=e.data.pagi.noiDungThayDoiTk,t.timeReceive=e.data.pagi.ngayNhan,t.fileName=e.data.pagi.tenHoSo,t.selectedProject=JSON.parse(e.data.pagi.duAn),t.arrItem=e.data.item})),this["storeqlda/getListProjectName"]().then((function(e){var a=e.data;for(var i in a){var s={id:a[i].id,text:a[i].tenDuAn};t.project.push(s)}}))},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])(["storeqlda/getListDataUserGTer","currentUserPersonalInfo","storeqlda/currentUser"])),Object(c["d"])({addressServe:function(t){return t.storeqlda.addressServe}})),methods:Object(r["a"])(Object(r["a"])({},Object(c["b"])(["storeqlda/ActionCreateFile","storeqlda/getListDataUser","storeqlda/getListProjectName","storeqlda/getFileWithId","storeqlda/ActionUpdateFile","storeqlda/destroyFileAttachTask"])),{},{custom_label:function(t){var e=t.text;return"".concat(e)},handleDelete:function(t){var e=this;confirm("Bạn có chắc chắn muốn xóa dữ liệu này không?")&&this["storeqlda/destroyFileAttachTask"](this.arrItem[t].id).then((function(a){e.arrItem=e.arrItem.filter((function(a){return a.id!==e.arrItem[t].id})),alert(a.data.msg)}))},onFileChange:function(t){var e=this,a=t.target.files;if(this.fileData=[],"function"===typeof FileReader){var i,s=Object(n["a"])(a);try{var r=function(){var t=i.value,a=new FileReader;a.readAsDataURL(t),a.onload=function(){e.fileData.push(t)}};for(s.s();!(i=s.n()).done;)r()}catch(o){s.e(o)}finally{s.f()}}else alert("Sorry, FileReader API not supported")},handleUpdate:function(){for(var t=this,e=document.querySelectorAll(".rootNameFile"),a={},i=0;i<e.length;i++)a[this.arrItem[i].id]=e[i].value;var s={duAn:JSON.stringify(this.selectedProject),loaiHoSo:"hồ sơ thiết kế",kyHieuHoSo:"hstk",tenHoSo:this.fileName,soLuong:null,ngayNhan:this.timeReceive,ngayTra:null,lanKiemTra:null,ketQua:null,lyDoKhongDat:null,noiDungThayDoiTk:this.contentChange,nguyenNhanThayDoiTk:this.reason,nguoiPheDuyet:this.approver,yKienTVGS:this.comment,idFile:this.idCurrentFile,objFile:this.fileData,arrNameFile:JSON.stringify(a)},n=this.$refs["kt_save_changes"];n.classList.add("spinner","spinner-light","spinner-right"),setTimeout((function(){t["storeqlda/ActionUpdateFile"](s).then((function(t){alert(t.data)})),n.classList.remove("spinner","spinner-light","spinner-right")}),2e3)},handleSave:function(){var t=this,e={duAn:JSON.stringify(this.selectedProject),loaiHoSo:"hồ sơ thiết kế",kyHieuHoSo:"hstk",tenHoSo:this.fileName,soLuong:null,ngayNhan:this.timeReceive,ngayTra:null,lanKiemTra:null,ketQua:null,lyDoKhongDat:null,noiDungThayDoiTk:this.contentChange,nguyenNhanThayDoiTk:this.reason,nguoiPheDuyet:this.approver,yKienTVGS:this.comment,objFile:this.fileData},a=this.$refs["kt_save_changes"];a.classList.add("spinner","spinner-light","spinner-right"),setTimeout((function(){t["storeqlda/ActionCreateFile"](e).then((function(t){alert(t.data)})),a.classList.remove("spinner","spinner-light","spinner-right")}),2e3)},handleClick:function(){this.isActive=!this.isActive}})},v=u,m=(a("60bc"),a("8609"),a("2877")),p=Object(m["a"])(v,i,s,!1,null,"c1de5a96",null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-b62672e8.196ac5ee.js.map